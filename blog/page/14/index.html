
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>@Lenciel</title>
  <meta name="author" content="Lenciel Li">

  
  <meta name="description" content="上周五和偶像派请假去办公积金贷款，惨遭拒绝：您丫有一张信用卡处于冻结状态。 WTF？ “信用卡处于冻结一般都是还款不及时或者是忘记缴年费了。”办理公积金的mm见多识广，提醒我们。 WTF？ 本座信用卡就一张，经常在用，怎么会冻结呢？麻烦办理贷款的mm查了开办时间和额度， &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://lenciel.cn/blog/page/14/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/data-table.css" media="screen, projection" rel="stylesheet" type="text/css" />
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="http://feeds.feedburner.com/github/lenciel" rel="alternate" title="@Lenciel" type="application/atom+xml">
  <!-- Facebook Open Graph
     Facebook Debugger: https://developers.facebook.com/tools/debug -->

<meta property="og:type" content="article" />
<meta property="og:url" content="http://lenciel.cn/blog/page/14/" />
<meta property="og:description" content="上周五和偶像派请假去办公积金贷款，惨遭拒绝：您丫有一张信用卡处于冻结状态。 WTF？ “信用卡处于冻结一般都是还款不及时或者是忘记缴年费了。”办理公积金的mm见多识广，提醒我们。 WTF？ 本座信用卡就一张，经常在用，怎么会冻结呢？麻烦办理贷款的mm查了开办时间和额度， &hellip;" />

<meta property="og:site_name" content="http://lenciel.cn" />
<meta property="article:author" content="https://plus.google.com/114787528537231301324">



<meta itemprop="description" content="上周五和偶像派请假去办公积金贷款，惨遭拒绝：您丫有一张信用卡处于冻结状态。 WTF？ “信用卡处于冻结一般都是还款不及时或者是忘记缴年费了。”办理公积金的mm见多识广，提醒我们。 WTF？ 本座信用卡就一张，经常在用，怎么会冻结呢？麻烦办理贷款的mm查了开办时间和额度， &hellip;" />

<!-- Combine multiple fonts into one request -->
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic|Patua+One|Yanone+Kaffeesatz" rel="stylesheet" type="text/css">
<!-- jQuery -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

  <script>
  !function(g,s,q,r,d){r=g[r]=g[r]||function(){(r.q=r.q||[]).push(
  arguments)};d=s.createElement(q);q=s.getElementsByTagName(q)[0];
  d.src='//d1l6p2sc9645hc.cloudfront.net/tracker.js';q.parentNode.
  insertBefore(d,q)}(window,document,'script','_gs');

  _gs('GSN-360316-J');
</script>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-175991-3']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body    class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/">@Lenciel</a></h1>
  
    <h2>Thoughts and Rants.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/github/lenciel" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:lenciel.cn" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/"><i class="icon-home"></i>Home</a></li>
  <li><a href="/blog/archives"><i class="icon-book-alt"></i>Archives</a><span class="divider"></span></li>
  <li><a href="/about"><i class="icon-user"></i>About</a><span class="divider"></span></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2010/05/you-are-fucked/">You Are Fucked</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-05-11T21:06:00+08:00" pubdate data-updated="true">May 11<span>th</span>, 2010</time>
        
         | <a href="/2010/05/you-are-fucked/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="/downloads/images/you_are_fucked.png" alt="You are fucked" title="Don't touch me..." /></p>

<p>上周五和偶像派请假去办公积金贷款，惨遭拒绝：您丫有一张信用卡处于冻结状态。</p>

<p><strong>WTF？</strong></p>

<p>“信用卡处于冻结一般都是还款不及时或者是忘记缴年费了。”办理公积金的mm见多识广，提醒我们。</p>

<p><strong>WTF？</strong></p>

<p>本座信用卡就一张，经常在用，怎么会冻结呢？麻烦办理贷款的mm查了开办时间和额度，貌似是IBM时期的那张工行运通卡。</p>

<p><strong>WTF？</strong></p>

<p>一张没有开通使用的卡，居然被冻结了？赶紧95588…在6遍《天鹅湖》之后终于有人接听了：</p>

<blockquote>
  <p>“您好，请问有什么可以为您服务？”</p>

  <p>“WTF？”</p>

  <p>“好的，我们先核实一下您的身份。您的余额是？”</p>

  <p>“WTF？这张是信用卡，不是借记卡。”</p>

  <p>“我知道，那您的余额是？”</p>

  <p>“WTF？没有开通的信用卡，怎么会有余额？你是问额度吧？”</p>

  <p>“不是额度，这张卡，没有开通，那余额是？”</p>

  <p>“WTF？我真不知道了，能换个问题吗？”</p>

  <p>“我们的电话有录音，您必须回答我这个问题，余额是多少？”</p>

  <p>“WTFFFFFFFFFFFFFFFF！！！！”</p>

  <p>“先生您不要着急，仔细的听我的问题。一张卡，没有开通，没有往里面存过钱，没有往外面取过钱，那么它的余额是？”</p>

  <p>“是0！！！！！”</p>

  <p>“是的，就是0！”</p>
</blockquote>

<p>本来还和偶像派说果然现实生活比喜剧大师有趣，结果精彩的还在后面：</p>

<blockquote>
  <p>“先生您这张卡片是公司通知银行撤销对您的担保冻结了。”</p>

  <p>“哦。”
“是因为您离职了，所以公司不给您担保了。”</p>

  <p>“哦。我不关心为什么或怎么冻的。告诉我怎么解冻。”</p>

  <p>“先生我们解冻的流程是您补齐欠费，但是您的卡没有开通。”</p>

  <p>“哦？”</p>

  <p>“您的情况太特殊了，我们也不知道怎么解冻。”</p>

  <p>“WTF！”</p>

  <p>“所以我们要研究一下，三个工作日内给您答复。”</p>

  <p>“大家都是打工的，想想办法，ok？”</p>

  <p>“这样吧，我们会先给你开个证明，周一传真给你。”</p>

  <p>“今天传真不行吗？”</p>

  <p>“今天是周五，我们规定当天接的单子第二天才能开始办。明天后天是周末，所以周一给您处理。”</p>
</blockquote>

<p>今天是周二，周一和周二又打了5个电话。传真还是没有收到。</p>

<p>Yes, you are fucked……</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2010/03/half-a-year/">半年</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-03-09T00:12:00+08:00" pubdate data-updated="true">Mar 9<span>th</span>, 2010</time>
        
         | <a href="/2010/03/half-a-year/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="/downloads/images/my_idol.jpg" alt="My Idol" title="Don't touch me…" /></p>

<p>偶像派，</p>

<p>        很多人不愿意换工作，因为换一个工作简直跟再搬一次家，甚至再结一次婚一样麻烦。但在半年前我干脆的换了一个工作，搬了一次家，结了一次婚。做这些决定几乎都是秒杀，不建模，不仿真，不寻师问友，不瞻前顾后。因为，你是我的偶像。</p>

<p>        到现在的公司，活儿比原来简单，事情比以前麻烦，周末几乎没有，每天还得和同事看惊涛骇浪数风流人物先拍案惊奇再镇定自若。原来想的，睡10小时好觉、打20升酱油、散30分钟步、翻40页书、踢50分钟野球，如60岁老头的晨勃般音讯全无。</p>

<p>        但时至今日，我仍然面色红润健步如飞，因为，你是我的偶像。</p>

<p>        现代人没到而立，早就开始不惑。这个冬天，照旧有人结婚，有人分手，有人喜得贵子，有人撒手人寰。你问我人从哪里来？到哪里去？时间之外是什么？我们的一生如何度过？</p>

<p>        我找不出答案，看不清未来，摸不到法门，开不了天眼。好在对于我，偶像的意义，大过宗教，哲学，生死，轮回。所以看见你的时候，我就知道自己欢快的活着。</p>

<p>        让人欢快的是我们家里的山茶，楼下的玉兰都开了，红的，白的，大朵大朵。干完一周粘乎乎的工作，到朋友的新房去庆祝他入住，炒了一大锅咸得让大家都骂娘的蛋炒饭，对，这也是让人欢快的事情。</p>

<p>        让人欢快的是我们都爱读简单的文字、听舒缓的声音。陪你看台湾的综艺节目时，我翻到在播的球赛，你说，你看球赛吧。对，这是让人欢快的事情。早上我抱一下你出门上班，你身上有你闻不到的香味，而我能闻到，这，也是让人欢快的事情。</p>

<p>        宏观的看，人的一切都是如此而已：直立行走到登上月球，骑马射箭到周游世界，玩白玉足金到玩股票基金。我看过那部电影之后，也列过一个愿望清单，那些我想做的事情：</p>

<p>        去希腊看海，去西藏爬山。去英国看一场欧冠决赛，去南美看一场世界杯决赛。去最大的中文图书馆干一年管理员。看想看的书，顺便胡编瞎写，再顺便练出一手好毛笔字。争取把开过头的东西都写完，或者把自己写崩溃。然后跑回来，和老爸老弟老哥组小号团，不刷副本，任务升级，完成所有成就，杀完所有Boss。和老妈出国旅游，当她的翻译，摄影，导游，保镖。和岳父到酒窖，关上门，喝白的、红的、黄的，聊官场、商场、战场。喝大了，再聊球场、菜市场、万有引力场。学习按摩，或者推拿，或者针灸。治好自己的脖子，岳母的腰，老妈的脖子和腰。学会摄影，拍偶像派，拍老姐，老哥，老弟，老友的小朋友。封山育林，再拍自己的小朋友。</p>

<p>        也许，这些愿望有一部分能够实现。也许，一件也做不完。我还是能做梦，干活，悠然的过日子。因为你是我的偶像，而我们在一起。</p>

<p>        天冷手冻，辞不达意。十分钟之后你就下班，我们见面聊。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/08/the-rain-stopped/">没完没了</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-08-13T03:13:00+08:00" pubdate data-updated="true">Aug 13<span>th</span>, 2009</time>
        
         | <a href="/2009/08/the-rain-stopped/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="/downloads/images/almost_again.jpg" alt="Almost" title="Don't touch me..." /></p>

<p>雨是从正中午的时候开始下的。我朝外面看了看，好像也不大，就决定坐地铁去府河边走走。从很小的时候，我就想弄明白，下雨是让天空更亮了，还是让天空更暗了。所以，每次下雨我都跑去河边看。</p>

<p>当然，我从来没有得到结论。有的时候，天分明是因为下雨而明亮起来，可是当我想要再确切的看一眼的时候，又总觉得它好像是变暗了。这当然浪费了我很多的时间，于是我想起两个星期之前看到的那封信。</p>

<p>“你是一个好人，李重。我们有过很多美好的回忆。但是你三十二岁了，没房，没车，和你在一起有什么希望？你不是活在当下的，你不能停止去想那些没有任何意义的事情，我只能离开。”</p>

<p>这是我最近一个女朋友走的时候留下的。就像你们猜到的那样，我的恋情仿佛是被定时器控制着一样。当我从不知道哪一个梦中醒来的时候，就会看到收拾得整整齐齐的房间和那个黄澄澄的信封。</p>

<p>她们离开时使用的黄信封，由我在跟她们确定关系的夜晚交到她们手里。其实我并不是真正需要一个分手的原因，只不过每封信都会让我忍俊不禁。比如这次，她要求有回忆和希望，这两件事情都得和当下保持时间上的距离。可是她又如此的看重当下，这听起来多么贪心而滑稽啊。</p>

<p>后来，我在“一瓢油”肥肠粉店遇到过她一次。我试图向她说明，她离开我是因为她向往更富足的物质生活，这跟活不活在当下没有任何关系。</p>

<p>“也许，跟你活在谁的档下倒是有点关系。”我告别她之前用手捏了一把她富有弹性的屁股，然后像一个真正的流氓一样吹着口哨离开了。</p>

<p>想到这里，我右手的那两个手指忍不住揉搓起来。在我座位前面站着的女孩一定看到了我脸上挂着幸福的笑容，于是她也微笑起来。其实在她上车的时候我就注意到她了，我本来希望她坐在我身边，可是一个小孩子一下子蹲在了那里。我只好尽量和那个小孩保持距离，以免她误认为我是一个带着孩子去补课的无可救药的父亲。</p>

<p>为了看清楚她，我认真的扶了扶自己的眼镜。她鼻尖闪闪的汗珠让我想起来，别人都老老实实呆在教室里的时候，我和一个女孩来到河边，躺在露水打湿的草坪上。河上和身上都有慢慢升起的薄雾掩护起来，我假装不经意的碰到了她的腿。她害羞的转过脸去，我只能看到她鼻尖闪闪的汗珠。</p>

<p>就在这个时候，车不可救药的到站了。大概是正好这一站从地下开到了地上，车门开启的时候，有人欢呼起来。她走在出站人群的最后一个，我猜，她应该是不太确定应不应该在这一站下车。我看到她有些期待的看着我，似乎是希望我起身告诉她现在该怎么办。于是我望着门外，大声的说了一句：</p>

<blockquote>
  <p>咦，雨已经停了吗？</p>
</blockquote>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/06/kill-yourself-in-a-fashion-way/">品味时尚</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-06-09T21:25:00+08:00" pubdate data-updated="true">Jun 9<span>th</span>, 2009</time>
        
         | <a href="/2009/06/kill-yourself-in-a-fashion-way/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img title="fashion" style="border-right: 0px; border-top: 0px; display: inline; border-left: 0px; border-bottom: 0px" height="324" alt="fashion" src="/downloads/images/fashion.jpg" width="484" border="0" /></p>

<p>每年高考的时候，本座都特别期待江苏的作文题。因为传说中江苏的语文老师每年聚在一起都不骂国足是猪，而是骂作文命题老师是猪：对国足，他们还总是能猜中结果，而作文题，他们边都摸不着。</p>

<p>这次就果然又很特立独行的一猪哇：<a href="http://edu.qq.com/a/20090608/000172.htm" target="_blank">品味时尚</a>。</p>

<p>该作文题还有立意的提示信息：</p>

<blockquote>
  <p>人们追逐时尚，不是因为它适合自己的气质，而只是因为大家都是如此。</p>
</blockquote>

<p>不知道这个老师是不是个反非主流斗士，出了这么个题目：说实话，现在的小孩子走出来，没有比非主流更主流的打扮了。</p>

<p>于是同学们为了中举，都会忽悠老师说，时尚应该是自信，又或者是绿色，又或者是环保，又或者是本真，于是就显得自己人生观世界观狂成熟狂完满，即使行走在物欲横流的今天，也能百毒不侵了。</p>

<p>只是无论如何，我们总还是有条件不好的孩子。他也许读书就是为了扔掉锄头，能让自己的家族到城市里，过体面的生活，却只好写，“我虽然无法上网，甚至看不到电视。除开读书，还要帮家里干农活，但是我觉得时尚其实是本真。我现在的生活就挺好的，那些人人都追求的东西，房子，金钱，并不适合我的气质”。</p>

<p>不知道这种话，如果叫命题老师自己去写，他会不会边写边吐。</p>

<p>其实，对本座来说，最近正好有一个有趣的新闻，非常的“时尚”。</p>

<p>大家都知道，《Kill Bill》里面的Bill，最近挂了：是真的把自己挂起来了。不过，如果你用不同的关键字去搜索，会得出蛮有趣的结果。</p>

<blockquote>
  <p>心地纯良如偶像派的时尚品味者：<a href="http://www.google.com/search?hl=en&amp;q=kill+bill+%E4%B8%BB%E8%A7%92+%E8%87%AA%E6%9D%80&amp;sourceid=navclient-ff&amp;rlz=1B3GGGL_zh-CN___CN231&amp;ie=UTF-8" target="_blank">click</a></p>

  <p>心地不纯良如本座的时尚品味者：<a href="http://www.google.com/search?hl=en&amp;q=kill+bill+%E4%B8%BB%E8%A7%92+%E8%87%AA%E6%85%B0&amp;sourceid=navclient-ff&amp;rlz=1B3GGGL_zh-CN___CN231&amp;ie=UTF-8" target="_blank">click</a></p>
</blockquote>

<p>嗯哼……其实大家不要觉得从事“手工业”的时候出事有什么奇怪的。本座在以前看<a href="http://en.wikipedia.org/wiki/Chuck_Palahniuk" target="_blank">Chuck</a>大叔<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup> 那篇著名的<a href="http://chuckpalahniuk.net/features/shorts/guts" target="_blank">Guts</a>的时候（已经有人<a href="http://www.verycd.com/groups/@g2386100/683454.topic" target="_blank">翻译</a>，慎入！！）有读到过一段：</p>

<blockquote>
  <p>Looking back, kid-psych experts, school counselors now say that most of the last peak in teen suicide was kids trying to choke while they beat off. Their folks would find them, a towel twisted around the kid’s neck, the towel tied to the rod in their bedroom closet, the kid dead. Dead sperm everywhere. Of course the folks cleaned up. They put some pants on their kid. They made it look… better. Intentional at least. The regular kind of sad, teen suicide.</p>
</blockquote>

<p>嗯哼……所以有的时候时尚人士莫名其妙的自缢，是没有那么悲情的。</p>

<p>这又让本座想起来，世界上有两种动物，因为特别重视配偶闻名。一种就是俺们国鸟丹顶鹤<sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup> 。诗经说丫们谈起恋爱“鹤鸣九皋，声闻于天”。而且一方去世，另一方一定会孤单终老（要知道丹顶鹤可以活60岁左右）。</p>

<p>甚至有一种颇有争论的说法是，只要双方有一个意外死去，另外一个不久就会把自己的脖子打一个结，跟着死去。</p>

<p>每次本座看到人们这样的议论时，总是会有一些心地不纯良的时尚品味在心头默默的泛起<sup id="fnref:3"><a href="#fn:3" rel="footnote">3</a></sup> 。</p>

<p>可惜啊，老师，您看我肚子里面这么有货，却没法跟您一起品味时尚。</p>

<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p>这位大叔不是写黄书的，写的第一篇长篇小说叫做，《<a href="http://www.imdb.com/title/tt0137523/" target="_blank">Fight Club</a>》。<a href="#fnref:1" rel="reference">&#8617;</a></p>
    </li>
    <li id="fn:2">
      <p>还有一种是鸳鸯么？   <a href="#fnref:2" rel="reference">&#8617;</a></p>
    </li>
    <li id="fn:3">
      <p>请问这样是不是比较隐晦一点…<a href="#fnref:3" rel="reference">&#8617;</a></p>
    </li>
  </ol>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/04/ssh-using-paramiko/">使用paramiko进行ssh工作</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-04-23T00:37:00+08:00" pubdate data-updated="true">Apr 23<span>rd</span>, 2009</time>
        
         | <a href="/2009/04/ssh-using-paramiko/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>最近在单位写一个自动build的小工具。因为clearcase的<code>setview</code>命令实际上是激活一个新的<code>shell</code>，所以用简单的“串通”<code>shell</code>的脚本很难做到。</p>

<p>因为在邮件组里面看到有同样问题的Matt说用<code>paramiko</code>解决了问题，就试了试，过程还颇有点艰辛。</p>

<p>首先，<code>paramiko</code>没有直接的<code>msi</code>或者<code>exe</code>版本给<code>Windows</code>用户下载，而是需要在本地进行编译。而且<code>python</code>的<code>easy_install</code>工具在Vista下面会报错，所以至少花了十几分钟才算安装完毕。</p>

<p>结果在用test.py验证安装的时候就报错了，说什么：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="n">paramiko</span><span class="o">.</span><span class="n">SSHException</span><span class="p">:</span> <span class="n">No</span> <span class="n">suitable</span> <span class="n">address</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>安装是我自己一步步弄得，难道搞错了？只好照着demo写了一个sftp的脚本，发现是可以跑的，干。</p>

<p>只好丢了封信给邮件组，然后自己开始找是啥问题。丢给邮件组的信至今没有回音（人气不行啊，<code>paramiko</code>），问题还是找到了。原来是1.7.5的<code>paramiko</code>增加了对ipv6的支持，结果引入了错误。更新了<code>client.py</code>后重新编译就可以用了。</p>

<p>最后，虽然demo的例子也挺多，但是好像没有说清楚怎么用invoke_shell和get_pty以及照例奉上一段代码。</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span> (paramiko_sample.py)</span> <a href="/downloads/code/paramiko_sample.py">download</a></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
<span class="line-number">39</span>
<span class="line-number">40</span>
<span class="line-number">41</span>
<span class="line-number">42</span>
<span class="line-number">43</span>
<span class="line-number">44</span>
<span class="line-number">45</span>
<span class="line-number">46</span>
<span class="line-number">47</span>
<span class="line-number">48</span>
<span class="line-number">49</span>
<span class="line-number">50</span>
<span class="line-number">51</span>
<span class="line-number">52</span>
<span class="line-number">53</span>
<span class="line-number">54</span>
<span class="line-number">55</span>
<span class="line-number">56</span>
<span class="line-number">57</span>
<span class="line-number">58</span>
<span class="line-number">59</span>
<span class="line-number">60</span>
<span class="line-number">61</span>
<span class="line-number">62</span>
<span class="line-number">63</span>
<span class="line-number">64</span>
<span class="line-number">65</span>
<span class="line-number">66</span>
<span class="line-number">67</span>
<span class="line-number">68</span>
<span class="line-number">69</span>
<span class="line-number">70</span>
<span class="line-number">71</span>
<span class="line-number">72</span>
<span class="line-number">73</span>
<span class="line-number">74</span>
<span class="line-number">75</span>
<span class="line-number">76</span>
<span class="line-number">77</span>
<span class="line-number">78</span>
<span class="line-number">79</span>
<span class="line-number">80</span>
<span class="line-number">81</span>
<span class="line-number">82</span>
<span class="line-number">83</span>
<span class="line-number">84</span>
<span class="line-number">85</span>
<span class="line-number">86</span>
<span class="line-number">87</span>
<span class="line-number">88</span>
<span class="line-number">89</span>
<span class="line-number">90</span>
<span class="line-number">91</span>
<span class="line-number">92</span>
<span class="line-number">93</span>
<span class="line-number">94</span>
<span class="line-number">95</span>
<span class="line-number">96</span>
<span class="line-number">97</span>
<span class="line-number">98</span>
<span class="line-number">99</span>
<span class="line-number">100</span>
<span class="line-number">101</span>
<span class="line-number">102</span>
<span class="line-number">103</span>
<span class="line-number">104</span>
<span class="line-number">105</span>
<span class="line-number">106</span>
<span class="line-number">107</span>
<span class="line-number">108</span>
<span class="line-number">109</span>
<span class="line-number">110</span>
<span class="line-number">111</span>
<span class="line-number">112</span>
<span class="line-number">113</span>
<span class="line-number">114</span>
<span class="line-number">115</span>
<span class="line-number">116</span>
<span class="line-number">117</span>
<span class="line-number">118</span>
<span class="line-number">119</span>
<span class="line-number">120</span>
<span class="line-number">121</span>
<span class="line-number">122</span>
<span class="line-number">123</span>
<span class="line-number">124</span>
<span class="line-number">125</span>
<span class="line-number">126</span>
<span class="line-number">127</span>
<span class="line-number">128</span>
<span class="line-number">129</span>
<span class="line-number">130</span>
<span class="line-number">131</span>
<span class="line-number">132</span>
<span class="line-number">133</span>
<span class="line-number">134</span>
<span class="line-number">135</span>
<span class="line-number">136</span>
<span class="line-number">137</span>
<span class="line-number">138</span>
<span class="line-number">139</span>
<span class="line-number">140</span>
<span class="line-number">141</span>
<span class="line-number">142</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="sd">&quot;&quot;&quot;</span>
</span><span class="line"><span class="sd">This script is using for build the software package</span>
</span><span class="line"><span class="sd">&quot;&quot;&quot;</span>
</span><span class="line">
</span><span class="line"><span class="kn">import</span> <span class="nn">sys</span>
</span><span class="line"><span class="kn">import</span> <span class="nn">time</span>
</span><span class="line"><span class="kn">import</span> <span class="nn">paramiko</span>
</span><span class="line"><span class="kn">import</span> <span class="nn">traceback</span>
</span><span class="line"><span class="kn">import</span> <span class="nn">ConfigParser</span>
</span><span class="line">
</span><span class="line"><span class="sd">&quot;&quot;&quot;</span>
</span><span class="line"><span class="sd">The main class of the builder.</span>
</span><span class="line"><span class="sd">&quot;&quot;&quot;</span>
</span><span class="line"><span class="k">class</span> <span class="nc">Builder</span><span class="p">:</span>
</span><span class="line">
</span><span class="line">    <span class="sd">&quot;&quot;&quot;Parses options from the ini file to create connection.&quot;&quot;&quot;</span>
</span><span class="line">    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">inifile</span><span class="p">):</span>
</span><span class="line">        <span class="k">try</span><span class="p">:</span>
</span><span class="line">            <span class="n">config</span> <span class="o">=</span> <span class="n">ConfigParser</span><span class="o">.</span><span class="n">ConfigParser</span><span class="p">()</span>
</span><span class="line">            <span class="n">config</span><span class="o">.</span><span class="n">readfp</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">inifile</span><span class="p">))</span>
</span><span class="line">
</span><span class="line">            <span class="bp">self</span><span class="o">.</span><span class="n">_ssh</span> <span class="o">=</span> <span class="n">paramiko</span><span class="o">.</span><span class="n">SSHClient</span><span class="p">()</span>
</span><span class="line">            <span class="bp">self</span><span class="o">.</span><span class="n">_ssh</span><span class="o">.</span><span class="n">set_missing_host_key_policy</span><span class="p">(</span><span class="n">paramiko</span><span class="o">.</span><span class="n">AutoAddPolicy</span><span class="p">())</span>
</span><span class="line">            <span class="bp">self</span><span class="o">.</span><span class="n">_ssh</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;host&#39;</span><span class="p">,</span><span class="s">&#39;server&#39;</span><span class="p">),</span>
</span><span class="line">                              <span class="n">port</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">getint</span><span class="p">(</span><span class="s">&#39;host&#39;</span><span class="p">,</span> <span class="s">&#39;port&#39;</span><span class="p">),</span>
</span><span class="line">                              <span class="n">username</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;host&#39;</span><span class="p">,</span><span class="s">&#39;user&#39;</span><span class="p">),</span>
</span><span class="line">                              <span class="n">password</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;host&#39;</span><span class="p">,</span><span class="s">&#39;password&#39;</span><span class="p">))</span>
</span><span class="line">
</span><span class="line">            <span class="bp">self</span><span class="o">.</span><span class="n">_t</span> <span class="o">=</span> <span class="n">paramiko</span><span class="o">.</span><span class="n">Transport</span><span class="p">((</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;host&#39;</span><span class="p">,</span><span class="s">&#39;server&#39;</span><span class="p">),</span> <span class="n">config</span><span class="o">.</span><span class="n">getint</span><span class="p">(</span><span class="s">&#39;host&#39;</span><span class="p">,</span> <span class="s">&#39;port&#39;</span><span class="p">)))</span>
</span><span class="line">            <span class="bp">self</span><span class="o">.</span><span class="n">_t</span><span class="o">.</span><span class="n">start_client</span><span class="p">()</span>
</span><span class="line">            <span class="bp">self</span><span class="o">.</span><span class="n">_t</span><span class="o">.</span><span class="n">auth_password</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;host&#39;</span><span class="p">,</span><span class="s">&#39;user&#39;</span><span class="p">),</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;host&#39;</span><span class="p">,</span><span class="s">&#39;password&#39;</span><span class="p">))</span>
</span><span class="line">            <span class="bp">self</span><span class="o">.</span><span class="n">_sftp</span> <span class="o">=</span> <span class="n">paramiko</span><span class="o">.</span><span class="n">SFTPClient</span><span class="o">.</span><span class="n">from_transport</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_t</span><span class="p">)</span>
</span><span class="line">        <span class="k">except</span> <span class="ne">Exception</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
</span><span class="line">            <span class="k">print</span> <span class="s">&#39;*** Caught exception: </span><span class="si">%s</span><span class="s">: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</span><span class="line">            <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
</span><span class="line">            <span class="k">try</span><span class="p">:</span>
</span><span class="line">                <span class="bp">self</span><span class="o">.</span><span class="n">closeConn</span><span class="p">()</span>
</span><span class="line">            <span class="k">except</span><span class="p">:</span>
</span><span class="line">                <span class="k">pass</span>
</span><span class="line">            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">        <span class="bp">self</span><span class="o">.</span><span class="n">_fpga</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;fpga compress&#39;</span><span class="p">,</span><span class="s">&#39;fpga&#39;</span><span class="p">)</span>
</span><span class="line">        <span class="bp">self</span><span class="o">.</span><span class="n">_lpath</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;fpga compress&#39;</span><span class="p">,</span><span class="s">&#39;local_fpga_path&#39;</span><span class="p">)</span>
</span><span class="line">        <span class="bp">self</span><span class="o">.</span><span class="n">_rpath</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;fpga compress&#39;</span><span class="p">,</span><span class="s">&#39;remote_fpga_path&#39;</span><span class="p">)</span>
</span><span class="line">        <span class="bp">self</span><span class="o">.</span><span class="n">_oab</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;fpga compress&#39;</span><span class="p">,</span><span class="s">&#39;oab&#39;</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">        <span class="bp">self</span><span class="o">.</span><span class="n">_xlf</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;xlf build&#39;</span><span class="p">,</span><span class="s">&#39;xlf&#39;</span><span class="p">)</span>
</span><span class="line">        <span class="bp">self</span><span class="o">.</span><span class="n">_lmid</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;xlf build&#39;</span><span class="p">,</span><span class="s">&#39;lmid&#39;</span><span class="p">)</span>
</span><span class="line">        <span class="bp">self</span><span class="o">.</span><span class="n">_xpp</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;xlf build&#39;</span><span class="p">,</span><span class="s">&#39;xpp&#39;</span><span class="p">)</span>
</span><span class="line">        <span class="bp">self</span><span class="o">.</span><span class="n">_xdp</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;xlf build&#39;</span><span class="p">,</span><span class="s">&#39;xdp&#39;</span><span class="p">)</span>
</span><span class="line">        <span class="bp">self</span><span class="o">.</span><span class="n">_rru</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;xlf build&#39;</span><span class="p">,</span><span class="s">&#39;rru&#39;</span><span class="p">)</span>
</span><span class="line">        <span class="bp">self</span><span class="o">.</span><span class="n">_rruswdb</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;xlf build&#39;</span><span class="p">,</span><span class="s">&#39;rru_sw_db&#39;</span><span class="p">)</span>
</span><span class="line">        <span class="bp">self</span><span class="o">.</span><span class="n">_xpl</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;xlf build&#39;</span><span class="p">,</span><span class="s">&#39;xpl&#39;</span><span class="p">)</span>
</span><span class="line">        <span class="k">print</span><span class="p">(</span><span class="s">&quot;Your input fpga file is:&quot;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_lpath</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_fpga</span><span class="o">+</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
</span><span class="line">        <span class="k">print</span><span class="p">(</span><span class="s">&quot;Your ouput xlf file will be:&quot;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_xlf</span><span class="o">+</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">    <span class="sd">&quot;&quot;&quot;Run command on the server&quot;&quot;&quot;</span>
</span><span class="line">    <span class="k">def</span> <span class="nf">runCmd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">command</span><span class="p">):</span>
</span><span class="line">        <span class="sd">&quot;&quot;&quot;run &lt;command&gt;</span>
</span><span class="line"><span class="sd">        Execute this command on all hosts in the list&quot;&quot;&quot;</span>
</span><span class="line">        <span class="k">if</span> <span class="n">command</span><span class="p">:</span>
</span><span class="line">            <span class="n">stdin</span><span class="p">,</span> <span class="n">stdout</span><span class="p">,</span> <span class="n">stderr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ssh</span><span class="o">.</span><span class="n">exec_command</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>
</span><span class="line">            <span class="n">stdin</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span class="line">            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">stdout</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">splitlines</span><span class="p">():</span>
</span><span class="line">                <span class="k">print</span> <span class="n">line</span>
</span><span class="line">        <span class="k">else</span><span class="p">:</span>
</span><span class="line">            <span class="k">print</span> <span class="s">&quot;usage: run &lt;command&gt;&quot;</span>
</span><span class="line">
</span><span class="line">    <span class="sd">&quot;&quot;&quot;Upload the fpga and compress it to oab.bin&quot;&quot;&quot;</span>
</span><span class="line">    <span class="k">def</span> <span class="nf">createOab</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class="line">        <span class="bp">self</span><span class="o">.</span><span class="n">_sftp</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_lpath</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_fpga</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_rpath</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_fpga</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">        <span class="bp">self</span><span class="o">.</span><span class="n">runCmd</span><span class="p">(</span><span class="s">&quot;hou_create_fpga -bf </span><span class="se">\&quot;</span><span class="s">/home/ehholli/fpgainput/fpga.med</span><span class="se">\&quot;</span><span class="s"> -dn </span><span class="se">\&quot;</span><span class="s">CXC 172 8213/1</span><span class="se">\&quot;</span><span class="s"> -of oab -dev </span><span class="se">\&quot;</span><span class="s">XC2V6000,-4</span><span class="se">\&quot;</span><span class="s"> -dir /home/ehholli/fpgaoutput/&quot;</span><span class="p">)</span>
</span><span class="line">        <span class="k">try</span><span class="p">:</span>
</span><span class="line">            <span class="bp">self</span><span class="o">.</span><span class="n">_sftp</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_oab</span><span class="p">,</span><span class="s">&#39;oab.bin&#39;</span><span class="p">)</span>
</span><span class="line">            <span class="k">print</span><span class="p">(</span><span class="s">&quot;Fpga file compress successfully!&quot;</span><span class="p">)</span>
</span><span class="line">        <span class="k">except</span> <span class="ne">Exception</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
</span><span class="line">            <span class="k">print</span> <span class="s">&#39;*** Caught exception: </span><span class="si">%s</span><span class="s">: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</span><span class="line">            <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
</span><span class="line">            <span class="k">try</span><span class="p">:</span>
</span><span class="line">                <span class="bp">self</span><span class="o">.</span><span class="n">closeConn</span><span class="p">()</span>
</span><span class="line">            <span class="k">except</span><span class="p">:</span>
</span><span class="line">                <span class="k">pass</span>
</span><span class="line">            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">    <span class="sd">&quot;&quot;&quot;Make the tlf&quot;&quot;&quot;</span>
</span><span class="line">    <span class="k">def</span> <span class="nf">genXlf</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class="line">        <span class="c">#open a interactive shell</span>
</span><span class="line">        <span class="n">ct_chan</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_t</span><span class="o">.</span><span class="n">open_session</span><span class="p">()</span>
</span><span class="line">        <span class="n">ct_chan</span><span class="o">.</span><span class="n">setblocking</span><span class="p">()</span>
</span><span class="line">        <span class="n">ct_chan</span><span class="o">.</span><span class="n">get_pty</span><span class="p">()</span>
</span><span class="line">        <span class="n">ct_chan</span><span class="o">.</span><span class="n">invoke_shell</span><span class="p">()</span>
</span><span class="line">        <span class="c">#ct setview ehholli</span>
</span><span class="line">        <span class="k">if</span><span class="p">(</span><span class="n">ct_chan</span><span class="o">.</span><span class="n">send_ready</span><span class="p">()):</span>
</span><span class="line">            <span class="n">ct_chan</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s">&quot;ct setview ehholli</span><span class="se">\r\n</span><span class="s">&quot;</span><span class="p">)</span>
</span><span class="line">        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">        <span class="c">#compile</span>
</span><span class="line">        <span class="n">build_cmd</span><span class="o">=</span><span class="s">&quot;/vobs/rbs/hw/bcp/xp/deliv/solaris2/bin/xlf_gen -r &quot;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_xpp</span><span class="o">+</span><span class="s">&quot; &quot;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_xdp</span><span class="o">+</span><span class="s">&quot; &quot;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_rru</span> \
</span><span class="line">                     <span class="o">+</span><span class="s">&quot; -i &quot;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_oab</span><span class="o">+</span><span class="s">&quot; &quot;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_rruswdb</span> \
</span><span class="line">                     <span class="o">+</span><span class="s">&quot; -o /home/ehholli/tmp/&quot;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_xlf</span> \
</span><span class="line">                     <span class="o">+</span><span class="s">&quot; -x &quot;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_xpl</span> \
</span><span class="line">                     <span class="o">+</span><span class="s">&quot; -lmid </span><span class="se">\&quot;</span><span class="s">&quot;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_lmid</span><span class="o">+</span><span class="s">&quot;</span><span class="se">\&quot;</span><span class="s">&quot;</span> \
</span><span class="line">                     <span class="o">+</span><span class="s">&quot; -t </span><span class="se">\&quot;</span><span class="s">au_applic</span><span class="se">\&quot;</span><span class="s"> -v </span><span class="se">\r\n</span><span class="s">&quot;</span>
</span><span class="line">        <span class="k">print</span><span class="p">(</span><span class="n">build_cmd</span><span class="p">)</span>
</span><span class="line">        <span class="k">if</span><span class="p">(</span><span class="n">ct_chan</span><span class="o">.</span><span class="n">send_ready</span><span class="p">()):</span>
</span><span class="line">            <span class="n">ct_chan</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">build_cmd</span><span class="p">)</span>
</span><span class="line">        <span class="n">tCheck2</span> <span class="o">=</span>
</span><span class="line">        <span class="k">while</span> <span class="ow">not</span> <span class="n">ct_chan</span><span class="o">.</span><span class="n">recv_ready</span><span class="p">():</span>
</span><span class="line">            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</span><span class="line">            <span class="n">tCheck2</span><span class="o">+=</span><span class="mi">1</span>
</span><span class="line">            <span class="k">if</span> <span class="n">tCheck2</span> <span class="o">&gt;=</span> <span class="mi">6</span><span class="p">:</span>
</span><span class="line">                <span class="k">print</span> <span class="s">&#39;time out&#39;</span><span class="c">#TODO: add exeption here</span>
</span><span class="line">        <span class="k">print</span><span class="p">(</span><span class="n">ct_chan</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">65536</span><span class="p">))</span>
</span><span class="line">        <span class="n">ct_chan</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span class="line">        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</span><span class="line">        <span class="c">#download the xlf file</span>
</span><span class="line">        <span class="k">try</span><span class="p">:</span>
</span><span class="line">            <span class="bp">self</span><span class="o">.</span><span class="n">_sftp</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;/home/ehholli/tmp/&quot;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_xlf</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_xlf</span><span class="p">)</span>
</span><span class="line">            <span class="k">print</span><span class="p">(</span><span class="s">&quot;xlf file downloaded successfully!&quot;</span><span class="p">)</span>
</span><span class="line">        <span class="k">except</span> <span class="ne">Exception</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
</span><span class="line">            <span class="k">print</span> <span class="s">&#39;*** Caught exception: </span><span class="si">%s</span><span class="s">: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</span><span class="line">            <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
</span><span class="line">            <span class="k">try</span><span class="p">:</span>
</span><span class="line">                <span class="bp">self</span><span class="o">.</span><span class="n">closeConn</span><span class="p">()</span>
</span><span class="line">            <span class="k">except</span><span class="p">:</span>
</span><span class="line">                <span class="k">pass</span>
</span><span class="line">            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">    <span class="sd">&quot;&quot;&quot;Close everything we opened&quot;&quot;&quot;</span>
</span><span class="line">    <span class="k">def</span> <span class="nf">closeConn</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class="line">        <span class="bp">self</span><span class="o">.</span><span class="n">_ssh</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span class="line">        <span class="bp">self</span><span class="o">.</span><span class="n">_sftp</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span class="line">        <span class="bp">self</span><span class="o">.</span><span class="n">_t</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span class="line"><span class="k">if</span> <span class="n">__name__</span><span class="o">==</span><span class="s">&#39;__main__&#39;</span><span class="p">:</span>
</span><span class="line">    <span class="c"># setup logging</span>
</span><span class="line">    <span class="n">paramiko</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">log_to_file</span><span class="p">(</span><span class="s">&#39;demo_builder.log&#39;</span><span class="p">)</span>
</span><span class="line">    <span class="n">b</span><span class="o">=</span><span class="n">Builder</span><span class="p">(</span><span class="s">&#39;cfg.ini&#39;</span><span class="p">)</span>
</span><span class="line">    <span class="n">b</span><span class="o">.</span><span class="n">createOab</span><span class="p">()</span>
</span><span class="line">    <span class="n">b</span><span class="o">.</span><span class="n">genXlf</span><span class="p">()</span>
</span><span class="line">    <span class="c">#b.runCmd(&#39;ls&#39;)</span>
</span><span class="line">    <span class="n">b</span><span class="o">.</span><span class="n">closeConn</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/15/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/13/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    
  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
Blog theme: <a href="https://github.com/lenciel/octopress-theme-lenciel">Octopress-Lenciel 0.1</a>
<span class="theme-version">Copyright &copy; 2014 - Lenciel Li</span>
  <section class="contruction-wrap">
    <div class="contruction"></div>
  </section>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'lencielgithub';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>









<!--














                                            IIIIIIIIII       I
                  II                     IIIIIIIIIIIIIIIIIIII
                  IIII                  IIIIIIIIIIIIIIIIIIII
                  IIIIII                IIIIIIIIIIIIIIIIII III
                  IIIIIIII             IIIIIIIIIIIIIIIIIIIIII
                  IIIIIIIIIII          IIIIIIIIIIIIIIIIIIIII
                  IIIIIIIIIIIIII       IIIIIIIIIIIIIIIIIII
                   IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII
                  I  IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII
                  IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII
                  IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII
                   IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII
                    IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII
                     IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII
                         IIIIIIIIIIIIIIIIIIIIIIIIIIIIIII
                     IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII
                      IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII
                        IIIIIIIIIIIIIIIIIIIIIIIIIIIII
                           IIIIIIIIIIIIIIIIIIIIIIIII
                             IIIIIIIIIIIIIIIIIIIII
                          IIIIIIIIIIIIIIIIIIIIIII
                I   IIIIIIIIIIIIIIIIIIIIIIIIII
                  IIIIIIIIIIIIIIIIIIIIIIIIII
                      IIIIIIIIIIIIIIIIII















 -->


</body>
</html>
