
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>@Lenciel</title>
  <meta name="author" content="Lenciel Li">

  
  <meta name="description" content="在读过《把时间当作朋友》和Matt Might的文章之后，回首2011就让人觉得莫名慌张起来。按《把时间当作朋友》这本书里所说，定计划要以周为单位，通过培养自己对时间的控制力，逐步把计划做到月甚至年这样的跨度。本座自觉还算比较能控制自己，所以打算制作一个基本单位为月的计划， &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://lenciel.github.io/blog/page/8/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/data-table.css" media="screen, projection" rel="stylesheet" type="text/css" />
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="http://feeds.feedburner.com/github/lenciel" rel="alternate" title="@Lenciel" type="application/atom+xml">
  <!-- Facebook Open Graph
     Facebook Debugger: https://developers.facebook.com/tools/debug -->

<meta property="og:type" content="article" />
<meta property="og:url" content="http://lenciel.github.io/blog/page/8/" />
<meta property="og:description" content="在读过《把时间当作朋友》和Matt Might的文章之后，回首2011就让人觉得莫名慌张起来。按《把时间当作朋友》这本书里所说，定计划要以周为单位，通过培养自己对时间的控制力，逐步把计划做到月甚至年这样的跨度。本座自觉还算比较能控制自己，所以打算制作一个基本单位为月的计划， &hellip;" />

<meta property="og:site_name" content="http://lenciel.github.io" />
<meta property="article:author" content="https://plus.google.com/114787528537231301324">



<meta itemprop="description" content="在读过《把时间当作朋友》和Matt Might的文章之后，回首2011就让人觉得莫名慌张起来。按《把时间当作朋友》这本书里所说，定计划要以周为单位，通过培养自己对时间的控制力，逐步把计划做到月甚至年这样的跨度。本座自觉还算比较能控制自己，所以打算制作一个基本单位为月的计划， &hellip;" />

<!-- Combine multiple fonts into one request -->
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic|Patua+One|Yanone+Kaffeesatz" rel="stylesheet" type="text/css">
<!-- jQuery -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-175991-3']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body    class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/">@Lenciel</a></h1>
  
    <h2>Thoughts and Rants.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/github/lenciel" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:lenciel.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/"><i class="icon-home"></i>Home</a></li>
  <li><a href="/blog/archives"><i class="icon-book-alt"></i>Archives</a><span class="divider"></span></li>
  <li><a href="/about"><i class="icon-user"></i>About</a><span class="divider"></span></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2012/01/plan-for-2012/">Plan for 2012</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-01-10T11:07:00+08:00" pubdate data-updated="true">Jan 10<span>th</span>, 2012</time>
        
         | <a href="/2012/01/plan-for-2012/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="/downloads/images/2012_great_view.jpg" alt="2012 Great View" title="Don't touch me..." /></p>

<p>在读过《<a href="http://book.douban.com/subject/3609132/" target="_blank">把时间当作朋友</a>》和<a href="http://matt.might.usesthis.com/" target="_blank">Matt Might</a>的文章之后，回首2011就让人觉得莫名慌张起来。按《<a href="http://book.douban.com/subject/3609132/" target="_blank">把时间当作朋友</a>》这本书里所说，定计划要以周为单位，通过培养自己对时间的控制力，逐步把计划做到月甚至年这样的跨度。本座自觉还算比较能控制自己，所以打算制作一个基本单位为月的计划，下面的十项活动将穿插在这个计划之中：</p>

<ol>
  <li>一点新知识   </li>
  <li>一砣好身体</li>
  <li>一个新玩具   </li>
  <li>一批新兴趣   </li>
  <li>一门新语言   </li>
  <li>一款新软件   </li>
  <li>一马新项目   </li>
  <li>一把新文艺 </li>
</ol>

<h4 id="section"><strong>一点新知识</strong></h4>

<p>用进废退，数理化史地生音体美忘记了就算了吧。但半路出家的本座，还有很多基础知识也非常单薄。准备了6本不那么理论的书，争取能用2个月一本的龟速精读：</p>

<ul>
  <li><a href="http://www.amazon.com/Code-Language-Computer-Hardware-Software/dp/0735611319/ref=sr_1_1?ie=UTF8&amp;qid=1326115601&amp;sr=8-1" target="_blank">Code: The Hidden Language of Computer Hardware and Software</a> </li>
  <li><a href="http://book.douban.com/subject/4327796/" target="_blank">Continuous Delivery</a> </li>
  <li><a href="http://www.amazon.com/dp/0201752840/?tag=stackoverfl08-20" target="_blank">Database Design for Mere Mortals</a> </li>
  <li><a href="http://www.amazon.com/Event-Processing-Action-Opher-Etzion/dp/1935182218/ref=sr_1_1?s=books&amp;ie=UTF8&amp;qid=1326115894&amp;sr=1-1" target="_blank">Event Processing in Action</a> </li>
  <li><a href="http://www.amazon.com/Art-Concurrency-Monkeys-Parallel-Applications/dp/0596521537/ref=sr_1_1?ie=UTF8&amp;qid=1326115671&amp;sr=8-1" target="_blank">The Art of Concurrency</a> </li>
  <li><a href="Designing the Obvious" target="_blank" class="broken_link">Designing the Obvious</a> </li>
</ul>

<h4 id="section-1"><strong>一砣好身体</strong></h4>

<p>关注自己的健康状况，保持适当的体育锻炼，既是对自己负责，也是对家人负责。2012年体育锻炼方面的发展目标是除开足球之外，要开拓可以和偶像派互动的项目。下面的四个项目，12个月都可以开展，但是可以根据气候的不同，在四个季度各有偏重：</p>

<ul>
  <li>跳绳 </li>
  <li>自行车 </li>
  <li>跑步 </li>
  <li>羽毛球 </li>
</ul>

<p>另外，程序员这个职业带来的伤害常常是<a href="http://en.wikipedia.org/wiki/Repetitive_strain_injury" target="_blank">RSI</a>。本座一直有比较严重的脖子疼和曾经越来越严重的肩膀和手腕疼。通过了解RSI，保持良好的姿势以及定时起来活动，比较好的缓解了疼痛。但是用电脑有时候是一屁股下去就不好起来的。让人欣喜的，传说中的<a href="http://www.hermanmiller.com/Products/Aeron-Chairs" target="_blank">Aeron</a>在中国<a href="http://www.hermanmiller.cn/" target="_blank">也能</a>买到了。所以明年还有一个目标：</p>

<ul>
  <li><a href="http://www.hermanmiller.com/Products/Aeron-Chairs" target="_blank">Aeron</a> </li>
</ul>

<h4 id="section-2"><strong>一个新玩具</strong></h4>

<p>在回成都之后第一年在E公司主要的玩具是那套收星的玩意儿。原来只要大概800块钱左右的成本(DM500和所有的分路器合路器F头都是在这家淘宝店<a href="http://boattv.taobao.com/?spm=1101_lrm.4-Q8vp.2-91JMq" target="_blank">买的</a>），就可以用60CM的锅收<a href="http://www.cnsat.net/134.0.htm" target="_blank">134</a>/<a href="http://www.cnsat.net/138.0.htm" target="_blank">138</a>/146三颗ku星。</p>

<p>接下来移籍M公司，主要的玩具似乎变成了Android。但是后来机缘巧合开始接触了各式各样的监控设备。说实在的从前端的IP化的云台枪机，到DVR，到最后的矩阵上墙，里面还是有很多挺有趣的技术。而且像中国这么大一个工地，到处都要装监控，这里面商机也不小。</p>

<p>明年如果能说动偶像派买个LEGO的<a href="http://mindstorms.lego.com/en-us/Default.aspx" target="_blank">MindStorm</a>当然是最好，如果失败，就入手最近红到爆的<a href="http://www.arduino.cc/" target="_blank">Arduino</a>，话说本座已经堆了很多这方面的书了都没有真正花时间去看过。可是作为控制系的学生，每次看到它们，都有难以抑制的原始冲动。这种东西，一年玩一个就足够了：</p>

<ul>
  <li><a href="http://mindstorms.lego.com/en-us/Default.aspx" target="_blank">MindStorm</a>  or </li>
  <li><a href="http://www.arduino.cc/" target="_blank">Arduino</a> </li>
</ul>

<h4 id="section-3"><strong>一批新兴趣</strong></h4>

<p>编程的很多道理你不一定只能在编程中学到，因为人类最先进的学习方法是类比。</p>

<p>而且，每天坐在电脑前面的老公在老婆和其他亲属心中的仇恨值是很高的。下面是一批本座觉得有可能进化为兴趣爱好并能够得到偶像派的广泛赞许和普遍接受的备选项目。仍然是均分到各个月份，但每个季度有倾斜的加大某项的比重：</p>

<ul>
  <li>摄影 </li>
  <li>画画 </li>
  <li>写毛笔字 </li>
  <li>厨艺 </li>
</ul>

<h4 id="section-4"><strong>一门新语言</strong></h4>

<p>程序员之所以被认为是个苦逼的职业，很重要的原因就是技术更新换代很快。去年看完《<a href="http://book.douban.com/subject/4768035/" target="_blank">Seven Languages in Seven Weeks</a>》之后本座就有计划学一下Haskell和Scala，但是去了一趟杭州拿到冰河翻译的<a href="http://book.douban.com/subject/6859720/" target="_blank">新书</a>之后本座把明年的目标换成了下面两个，每个半年：</p>

<ul>
  <li><a href="http://www.apl.jhu.edu/~hall/lisp.html" target="_blank">Lisp</a> </li>
  <li><a href="http://www.haskell.org/" target="_blank">Haskell</a> </li>
</ul>

<h4 id="section-5"><strong>一款新软件</strong></h4>

<p>人的创造力需要反复而大量的的基础知识和实作经验垫底，而基础知识和实作经验往往蕴藏在那些已经被时间验证过的作品里。所以要想拍好电影得看很多好电影，要想写好书得看很多好书，要想写出好软件得用很多好软件。在使用别人的软件时，可以想想如果是自己来写，什么地方做得比它好，什么地方还需要像别人学习。暂定的目标有：</p>

<ul>
  <li><a href="http://www.ispyconnect.com" target="_blank">iSpy</a> </li>
  <li><a href="http://c9.io/" target="_blank">Cloud9</a> </li>
  <li><a href="http://www.rapidftr.com/" target="_blank">RAPIDFTR</a> </li>
  <li><a href="http://www.openstack.org/" target="_blank">OpenStack</a> </li>
</ul>

<h4 id="section-6"><strong>一马新项目</strong></h4>

<p>写软件谋生的好处是不言而喻的，坏处是如果你老是只为了工资奖金写软件，慢慢的你就会感觉到“无趣”。无趣的根源很多，最主要的无非“人家想用xyz，但是只能用zyx”。其实有<a href="https://github.com/" target="_blank">Github</a>和<a href="https://bitbucket.org/" target="_blank">Bitbucket</a>之后，这些都是借口啊，亲。项目内容暂时保密。</p>

<h4 id="section-7"><strong>一把新文艺</strong></h4>

<p>还在读研究生的时候(也是J2EE最红火的时候？)，本座发现一件“奇闻“：<a href="http://www.springsource.org/" target="_blank">Spring</a>的作者Rod Johnson说之所以自己能写出拨乱反正的《<a href="http://book.douban.com/subject/1426848/" target="_blank">Expert One-on-one</a>》和<a href="http://www.springsource.org/" target="_blank">Spring</a>，和他学习过的音乐知识是分不开的。Google了一下，原来他除开有计算机学位还是个音乐学博士。</p>

<p>之后稍微留心就发现，这是一个普遍的现象。比如那个写微积分教材赚的钱就可以建2400w刀豪宅的音乐家<a href="http://www.thestar.com/news/article/933017--the-house-that-math-built" target="_blank">James Stewart</a>，再比如2011年最被关注的去世者<a href="http://en.wikipedia.org/wiki/Steve_Jobs" target="_blank">Steve Jobs</a>。有点儿文艺细胞，能从人性的角度思考，做出的产品往往比纯粹的工程产品要打动人心。</p>

<p>本座挺佩服自己能找出这么一个伟大的理由，得以在新的一年里继续毫无节制的：</p>

<ul>
  <li>看电影 </li>
  <li>读小说 </li>
  <li>听音乐 </li>
</ul>

<p>要顺利贯彻执行计划，总得有个考核标准。打算今后多写一点儿blog记录在案，不然也对不起本座A给酋长的银子啊：</p>

<p><img src="/downloads/images/vhost_threshold.png" alt="Vhost threshold" title="Don't touch me..." /></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2011/08/make-a-wish/">祝我们好运</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-08-02T21:40:00+08:00" pubdate data-updated="true">Aug 2<span>nd</span>, 2011</time>
        
         | <a href="/2011/08/make-a-wish/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="/downloads/images/boring_face.jpg" alt="Boring Face" title="Don't touch me…" /></p>

<p>03年的时候，看《迷失东京》，比尔·默里的这幅样子存在了本座硬盘里。有人说这是颇有喜感的画面，却带给本座前所未有的悲催感：那就是有朝一日，我们也会一如Bob Harris这个角色，莫名其妙的活在某个看似五光十色灯红酒绿的城市里面，内心却沉寂而冰冷，不管是手中丰满的鹌鹑，还是床上丰满的妹子，都已经很难唤醒那份生活的激情。</p>

<p>转眼到了现在，等自己真正有了家庭，才知道片子里面的事情，虽然迫在眉睫，却没有那么可怕。满街都是对家庭琐事感到烦恼，对事业发展感到无力的中年危机中的男人；满街都是对工作感到头疼，对婚姻充满疑惑，害怕丈夫出轨的女人，大家还是循规蹈矩的生活着。</p>

<p>的确如此，年轻的时候，爱情是最重要的事情。我们大都为它燃烧过，沉浮过。开心的时候很开心，伤神的时候很伤神。但过了那段活蹦乱跳的年纪，我们变得关心住房，关心物价，关心食品安全，关心教育质量。突然之间，社会的方方面面都跟自己有了关系。</p>

<p>这的确是很让人烦恼的事情，即便你不是一个很好胜的人，少了很多与同事亲戚比较带来的压力，生活在天朝仍然如此不易：就算是抱着最大的善意来看待今天中国的方方面面，它能给我带来的美好感受也拮据得让人难堪。很多同窗，同事前前后后的离开了这个国家，甚至有人说“少壮不努力，一直混内地”。</p>

<p>这次动车的事故好像让人看到了这种情绪的高潮。我看到一些骂声是因为义愤所致，但更多骂声是感情宣泄。经过刘志军腐败案和这次事故，国人对高铁的认识可能很难有一个<a href="http://www.ftchinese.com/story/001037078?page=1">日本人</a>理性：政治和法律失败如我朝，公民在生活中被各级官僚和依附于他们的特权阶级折腾得不轻，平时争辩喊冤都没戏，别说骂娘。所以地震豆腐渣，毒奶粉，郭美美，铁道部，无论最后有没有个结果，大家都是卷起袖子好一顿收拾。</p>

<p>不过本座还是对我朝抱有乐观态度，除开年纪大了渴望安定的生活环境，原因还有：</p>

<p>1、我朝毕竟从毛寡头把持到少数特权人士把持到庞大特权阶级把持的演进着，这让我乐观的觉得政治改革并非坚冰一块，总有普遍民主的一天。</p>

<p>2、我朝虽然大多数部门危机公关水平过二，出事了伤亡人数总是乱来，丧事非得往喜事办，不是出英雄就是出奇迹，但是毕竟我们现在可以骂铁道部了。倒过去几年，全国人民只敢公开骂骂中国男足。这让我乐观的觉得言论自由并非坚冰一块，这关一过，公民就总有享受公民权利的一天。</p>

<p>3、我朝的乱象，主要是全社会的唯利是图道德败坏（并非仅仅是官僚），这些在马克吐温的美国，巴尔扎克的法国，或者说一切发展中国家都很难避免。而我认识的很多善良的人，还是成为社会各界的栋梁，这让我乐观的觉得我朝总有人民素质提高，生活富足，成为发达国家的一天。</p>

<p>总之，以中国普通百姓的教育水平和信息渠道，要挡住整个社会进步的步伐，不论是多薄的熙来或者多大的党，恐怕都是很难。当然，有生之年，可能还是很难看到这一天又一天的。不过既然要生儿育女，总是先给他们许个愿比较好。</p>

<p>但愿不是乐观过度了，祝逝者都安息，祝祖国真和谐，祝我们都好运。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2010/03/half-an-year/">半年</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-03-09T00:12:00+08:00" pubdate data-updated="true">Mar 9<span>th</span>, 2010</time>
        
         | <a href="/2010/03/half-an-year/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="/downloads/images/my_idol.jpg" alt="My Idol" title="Don't touch me…" /></p>

<p>偶像派，</p>

<p>        很多人不愿意换工作，因为换一个工作简直跟再搬一次家，甚至再结一次婚一样麻烦。但在半年前我干脆的换了一个工作，搬了一次家，结了一次婚。做这些决定几乎都是秒杀，不建模，不仿真，不寻师问友，不瞻前顾后。因为，你是我的偶像。</p>

<p>        到现在的公司，活儿比原来简单，事情比以前麻烦，周末几乎没有，每天还得和同事看惊涛骇浪数风流人物先拍案惊奇再镇定自若。原来想的，睡10小时好觉、打20升酱油、散30分钟步、翻40页书、踢50分钟野球，如60岁老头的晨勃般音讯全无。</p>

<p>        但时至今日，我仍然面色红润健步如飞，因为，你是我的偶像。</p>

<p>        现代人没到而立，早就开始不惑。这个冬天，照旧有人结婚，有人分手，有人喜得贵子，有人撒手人寰。你问我人从哪里来？到哪里去？时间之外是什么？我们的一生如何度过？</p>

<p>        我找不出答案，看不清未来，摸不到法门，开不了天眼。好在对于我，偶像的意义，大过宗教，哲学，生死，轮回。所以看见你的时候，我就知道自己欢快的活着。</p>

<p>        让人欢快的是我们家里的山茶，楼下的玉兰都开了，红的，白的，大朵大朵。干完一周粘乎乎的工作，到朋友的新房去庆祝他入住，炒了一大锅咸得让大家都骂娘的蛋炒饭，对，这也是让人欢快的事情。</p>

<p>        让人欢快的是我们都爱读简单的文字、听舒缓的声音。陪你看台湾的综艺节目时，我翻到在播的球赛，你说，你看球赛吧。对，这是让人欢快的事情。早上我抱一下你出门上班，你身上有你闻不到的香味，而我能闻到，这，也是让人欢快的事情。</p>

<p>        宏观的看，人的一切都是如此而已：直立行走到登上月球，骑马射箭到周游世界，玩白玉足金到玩股票基金。我看过那部电影之后，也列过一个愿望清单，那些我想做的事情：</p>

<p>        去希腊看海，去西藏爬山。去英国看一场欧冠决赛，去南美看一场世界杯决赛。去最大的中文图书馆干一年管理员。看想看的书，顺便胡编瞎写，再顺便练出一手好毛笔字。争取把开过头的东西都写完，或者把自己写崩溃。然后跑回来，和老爸老弟老哥组小号团，不刷副本，任务升级，完成所有成就，杀完所有Boss。和老妈出国旅游，当她的翻译，摄影，导游，保镖。和岳父到酒窖，关上门，喝白的、红的、黄的，聊官场、商场、战场。喝大了，再聊球场、菜市场、万有引力场。学习按摩，或者推拿，或者针灸。治好自己的脖子，岳母的腰，老妈的脖子和腰。学会摄影，拍偶像派，拍老姐，老哥，老弟，老友的小朋友。封山育林，再拍自己的小朋友。</p>

<p>        也许，这些愿望有一部分能够实现。也许，一件也做不完。我还是能做梦，干活，悠然的过日子。因为你是我的偶像，而我们在一起。</p>

<p>        天冷手冻，辞不达意。十分钟之后你就下班，我们见面聊。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/06/kill-yourself-in-a-fashion-way/">品味时尚</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-06-09T21:25:00+08:00" pubdate data-updated="true">Jun 9<span>th</span>, 2009</time>
        
         | <a href="/2009/06/kill-yourself-in-a-fashion-way/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img title="fashion" style="border-right: 0px; border-top: 0px; display: inline; border-left: 0px; border-bottom: 0px" height="324" alt="fashion" src="/downloads/images/fashion.jpg" width="484" border="0" /></p>

<p>每年高考的时候，本座都特别期待江苏的作文题。因为传说中江苏的语文老师每年聚在一起都不骂国足是猪，而是骂作文命题老师是猪：对国足，他们还总是能猜中结果，而作文题，他们边都摸不着。</p>

<p>这次就果然又很特立独行的一猪哇：<a href="http://edu.qq.com/a/20090608/000172.htm" target="_blank">品味时尚</a>。</p>

<p>该作文题还有立意的提示信息：</p>

<blockquote>
  <p>人们追逐时尚，不是因为它适合自己的气质，而只是因为大家都是如此。</p>
</blockquote>

<p>不知道这个老师是不是个反非主流斗士，出了这么个题目：说实话，现在的小孩子走出来，没有比非主流更主流的打扮了。</p>

<p>于是同学们为了中举，都会忽悠老师说，时尚应该是自信，又或者是绿色，又或者是环保，又或者是本真，于是就显得自己人生观世界观狂成熟狂完满，即使行走在物欲横流的今天，也能百毒不侵了。</p>

<p>只是无论如何，我们总还是有条件不好的孩子。他也许读书就是为了扔掉锄头，能让自己的家族到城市里，过体面的生活，却只好写，“我虽然无法上网，甚至看不到电视。除开读书，还要帮家里干农活，但是我觉得时尚其实是本真。我现在的生活就挺好的，那些人人都追求的东西，房子，金钱，并不适合我的气质”。</p>

<p>不知道这种话，如果叫命题老师自己去写，他会不会边写边吐。</p>

<p>其实，对本座来说，最近正好有一个有趣的新闻，非常的“时尚”。</p>

<p>大家都知道，《Kill Bill》里面的Bill，最近挂了：是真的把自己挂起来了。不过，如果你用不同的关键字去搜索，会得出蛮有趣的结果。</p>

<blockquote>
  <p>心地纯良如偶像派的时尚品味者：<a href="http://www.google.com/search?hl=en&amp;q=kill+bill+%E4%B8%BB%E8%A7%92+%E8%87%AA%E6%9D%80&amp;sourceid=navclient-ff&amp;rlz=1B3GGGL_zh-CN___CN231&amp;ie=UTF-8" target="_blank">click</a></p>

  <p>心地不纯良如本座的时尚品味者：<a href="http://www.google.com/search?hl=en&amp;q=kill+bill+%E4%B8%BB%E8%A7%92+%E8%87%AA%E6%85%B0&amp;sourceid=navclient-ff&amp;rlz=1B3GGGL_zh-CN___CN231&amp;ie=UTF-8" target="_blank">click</a></p>
</blockquote>

<p>嗯哼……其实大家不要觉得从事“手工业”的时候出事有什么奇怪的。本座在以前看<a href="http://en.wikipedia.org/wiki/Chuck_Palahniuk" target="_blank">Chuck</a>大叔<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup> 那篇著名的<a href="http://chuckpalahniuk.net/features/shorts/guts" target="_blank">Guts</a>的时候（已经有人<a href="http://www.verycd.com/groups/@g2386100/683454.topic" target="_blank">翻译</a>，慎入！！）有读到过一段：</p>

<blockquote>
  <p>Looking back, kid-psych experts, school counselors now say that most of the last peak in teen suicide was kids trying to choke while they beat off. Their folks would find them, a towel twisted around the kid’s neck, the towel tied to the rod in their bedroom closet, the kid dead. Dead sperm everywhere. Of course the folks cleaned up. They put some pants on their kid. They made it look… better. Intentional at least. The regular kind of sad, teen suicide.</p>
</blockquote>

<p>嗯哼……所以有的时候时尚人士莫名其妙的自缢，是没有那么悲情的。</p>

<p>这又让本座想起来，世界上有两种动物，因为特别重视配偶闻名。一种就是俺们国鸟丹顶鹤<sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup> 。诗经说丫们谈起恋爱“鹤鸣九皋，声闻于天”。而且一方去世，另一方一定会孤单终老（要知道丹顶鹤可以活60岁左右）。</p>

<p>甚至有一种颇有争论的说法是，只要双方有一个意外死去，另外一个不久就会把自己的脖子打一个结，跟着死去。</p>

<p>每次本座看到人们这样的议论时，总是会有一些心地不纯良的时尚品味在心头默默的泛起<sup id="fnref:3"><a href="#fn:3" rel="footnote">3</a></sup> 。</p>

<p>可惜啊，老师，您看我肚子里面这么有货，却没法跟您一起品味时尚。</p>

<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p>这位大叔不是写黄书的，写的第一篇长篇小说叫做，《<a href="http://www.imdb.com/title/tt0137523/" target="_blank">Fight Club</a>》。<a href="#fnref:1" rel="reference">&#8617;</a></p>
    </li>
    <li id="fn:2">
      <p>还有一种是鸳鸯么？   <a href="#fnref:2" rel="reference">&#8617;</a></p>
    </li>
    <li id="fn:3">
      <p>请问这样是不是比较隐晦一点…<a href="#fnref:3" rel="reference">&#8617;</a></p>
    </li>
  </ol>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/04/ssh-using-paramiko/">使用paramiko进行ssh工作</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-04-23T00:37:00+08:00" pubdate data-updated="true">Apr 23<span>rd</span>, 2009</time>
        
         | <a href="/2009/04/ssh-using-paramiko/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>最近在单位写一个自动build的小工具。因为clearcase的<code>setview</code>命令实际上是激活一个新的<code>shell</code>，所以用简单的“串通”<code>shell</code>的脚本很难做到。</p>

<p>因为在邮件组里面看到有同样问题的Matt说用<code>paramiko</code>解决了问题，就试了试，过程还颇有点艰辛。</p>

<p>首先，<code>paramiko</code>没有直接的<code>msi</code>或者<code>exe</code>版本给<code>Windows</code>用户下载，而是需要在本地进行编译。而且<code>python</code>的<code>easy_install</code>工具在Vista下面会报错，所以至少花了十几分钟才算安装完毕。</p>

<p>结果在用test.py验证安装的时候就报错了，说什么：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="n">paramiko</span><span class="o">.</span><span class="n">SSHException</span><span class="p">:</span> <span class="n">No</span> <span class="n">suitable</span> <span class="n">address</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>安装是我自己一步步弄得，难道搞错了？只好照着demo写了一个sftp的脚本，发现是可以跑的，干。</p>

<p>只好丢了封信给邮件组，然后自己开始找是啥问题。丢给邮件组的信至今没有回音（人气不行啊，<code>paramiko</code>），问题还是找到了。原来是1.7.5的<code>paramiko</code>增加了对ipv6的支持，结果引入了错误。更新了<code>client.py</code>后重新编译就可以用了。</p>

<p>最后，虽然demo的例子也挺多，但是好像没有说清楚怎么用invoke_shell和get_pty以及照例奉上一段代码。</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span> (paramiko_sample.py)</span> <a href="/downloads/code/paramiko_sample.py">download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
<span class="line-number">39</span>
<span class="line-number">40</span>
<span class="line-number">41</span>
<span class="line-number">42</span>
<span class="line-number">43</span>
<span class="line-number">44</span>
<span class="line-number">45</span>
<span class="line-number">46</span>
<span class="line-number">47</span>
<span class="line-number">48</span>
<span class="line-number">49</span>
<span class="line-number">50</span>
<span class="line-number">51</span>
<span class="line-number">52</span>
<span class="line-number">53</span>
<span class="line-number">54</span>
<span class="line-number">55</span>
<span class="line-number">56</span>
<span class="line-number">57</span>
<span class="line-number">58</span>
<span class="line-number">59</span>
<span class="line-number">60</span>
<span class="line-number">61</span>
<span class="line-number">62</span>
<span class="line-number">63</span>
<span class="line-number">64</span>
<span class="line-number">65</span>
<span class="line-number">66</span>
<span class="line-number">67</span>
<span class="line-number">68</span>
<span class="line-number">69</span>
<span class="line-number">70</span>
<span class="line-number">71</span>
<span class="line-number">72</span>
<span class="line-number">73</span>
<span class="line-number">74</span>
<span class="line-number">75</span>
<span class="line-number">76</span>
<span class="line-number">77</span>
<span class="line-number">78</span>
<span class="line-number">79</span>
<span class="line-number">80</span>
<span class="line-number">81</span>
<span class="line-number">82</span>
<span class="line-number">83</span>
<span class="line-number">84</span>
<span class="line-number">85</span>
<span class="line-number">86</span>
<span class="line-number">87</span>
<span class="line-number">88</span>
<span class="line-number">89</span>
<span class="line-number">90</span>
<span class="line-number">91</span>
<span class="line-number">92</span>
<span class="line-number">93</span>
<span class="line-number">94</span>
<span class="line-number">95</span>
<span class="line-number">96</span>
<span class="line-number">97</span>
<span class="line-number">98</span>
<span class="line-number">99</span>
<span class="line-number">100</span>
<span class="line-number">101</span>
<span class="line-number">102</span>
<span class="line-number">103</span>
<span class="line-number">104</span>
<span class="line-number">105</span>
<span class="line-number">106</span>
<span class="line-number">107</span>
<span class="line-number">108</span>
<span class="line-number">109</span>
<span class="line-number">110</span>
<span class="line-number">111</span>
<span class="line-number">112</span>
<span class="line-number">113</span>
<span class="line-number">114</span>
<span class="line-number">115</span>
<span class="line-number">116</span>
<span class="line-number">117</span>
<span class="line-number">118</span>
<span class="line-number">119</span>
<span class="line-number">120</span>
<span class="line-number">121</span>
<span class="line-number">122</span>
<span class="line-number">123</span>
<span class="line-number">124</span>
<span class="line-number">125</span>
<span class="line-number">126</span>
<span class="line-number">127</span>
<span class="line-number">128</span>
<span class="line-number">129</span>
<span class="line-number">130</span>
<span class="line-number">131</span>
<span class="line-number">132</span>
<span class="line-number">133</span>
<span class="line-number">134</span>
<span class="line-number">135</span>
<span class="line-number">136</span>
<span class="line-number">137</span>
<span class="line-number">138</span>
<span class="line-number">139</span>
<span class="line-number">140</span>
<span class="line-number">141</span>
<span class="line-number">142</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="sd">&quot;&quot;&quot;</span>
</span><span class="line"><span class="sd">This script is using for build the software package</span>
</span><span class="line"><span class="sd">&quot;&quot;&quot;</span>
</span><span class="line">
</span><span class="line"><span class="kn">import</span> <span class="nn">sys</span>
</span><span class="line"><span class="kn">import</span> <span class="nn">time</span>
</span><span class="line"><span class="kn">import</span> <span class="nn">paramiko</span>
</span><span class="line"><span class="kn">import</span> <span class="nn">traceback</span>
</span><span class="line"><span class="kn">import</span> <span class="nn">ConfigParser</span>
</span><span class="line">
</span><span class="line"><span class="sd">&quot;&quot;&quot;</span>
</span><span class="line"><span class="sd">The main class of the builder.</span>
</span><span class="line"><span class="sd">&quot;&quot;&quot;</span>
</span><span class="line"><span class="k">class</span> <span class="nc">Builder</span><span class="p">:</span>
</span><span class="line">
</span><span class="line">    <span class="sd">&quot;&quot;&quot;Parses options from the ini file to create connection.&quot;&quot;&quot;</span>
</span><span class="line">    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">inifile</span><span class="p">):</span>
</span><span class="line">        <span class="k">try</span><span class="p">:</span>
</span><span class="line">            <span class="n">config</span> <span class="o">=</span> <span class="n">ConfigParser</span><span class="o">.</span><span class="n">ConfigParser</span><span class="p">()</span>
</span><span class="line">            <span class="n">config</span><span class="o">.</span><span class="n">readfp</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">inifile</span><span class="p">))</span>
</span><span class="line">
</span><span class="line">            <span class="bp">self</span><span class="o">.</span><span class="n">_ssh</span> <span class="o">=</span> <span class="n">paramiko</span><span class="o">.</span><span class="n">SSHClient</span><span class="p">()</span>
</span><span class="line">            <span class="bp">self</span><span class="o">.</span><span class="n">_ssh</span><span class="o">.</span><span class="n">set_missing_host_key_policy</span><span class="p">(</span><span class="n">paramiko</span><span class="o">.</span><span class="n">AutoAddPolicy</span><span class="p">())</span>
</span><span class="line">            <span class="bp">self</span><span class="o">.</span><span class="n">_ssh</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;host&#39;</span><span class="p">,</span><span class="s">&#39;server&#39;</span><span class="p">),</span>
</span><span class="line">                              <span class="n">port</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">getint</span><span class="p">(</span><span class="s">&#39;host&#39;</span><span class="p">,</span> <span class="s">&#39;port&#39;</span><span class="p">),</span>
</span><span class="line">                              <span class="n">username</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;host&#39;</span><span class="p">,</span><span class="s">&#39;user&#39;</span><span class="p">),</span>
</span><span class="line">                              <span class="n">password</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;host&#39;</span><span class="p">,</span><span class="s">&#39;password&#39;</span><span class="p">))</span>
</span><span class="line">
</span><span class="line">            <span class="bp">self</span><span class="o">.</span><span class="n">_t</span> <span class="o">=</span> <span class="n">paramiko</span><span class="o">.</span><span class="n">Transport</span><span class="p">((</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;host&#39;</span><span class="p">,</span><span class="s">&#39;server&#39;</span><span class="p">),</span> <span class="n">config</span><span class="o">.</span><span class="n">getint</span><span class="p">(</span><span class="s">&#39;host&#39;</span><span class="p">,</span> <span class="s">&#39;port&#39;</span><span class="p">)))</span>
</span><span class="line">            <span class="bp">self</span><span class="o">.</span><span class="n">_t</span><span class="o">.</span><span class="n">start_client</span><span class="p">()</span>
</span><span class="line">            <span class="bp">self</span><span class="o">.</span><span class="n">_t</span><span class="o">.</span><span class="n">auth_password</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;host&#39;</span><span class="p">,</span><span class="s">&#39;user&#39;</span><span class="p">),</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;host&#39;</span><span class="p">,</span><span class="s">&#39;password&#39;</span><span class="p">))</span>
</span><span class="line">            <span class="bp">self</span><span class="o">.</span><span class="n">_sftp</span> <span class="o">=</span> <span class="n">paramiko</span><span class="o">.</span><span class="n">SFTPClient</span><span class="o">.</span><span class="n">from_transport</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_t</span><span class="p">)</span>
</span><span class="line">        <span class="k">except</span> <span class="ne">Exception</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
</span><span class="line">            <span class="k">print</span> <span class="s">&#39;*** Caught exception: </span><span class="si">%s</span><span class="s">: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</span><span class="line">            <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
</span><span class="line">            <span class="k">try</span><span class="p">:</span>
</span><span class="line">                <span class="bp">self</span><span class="o">.</span><span class="n">closeConn</span><span class="p">()</span>
</span><span class="line">            <span class="k">except</span><span class="p">:</span>
</span><span class="line">                <span class="k">pass</span>
</span><span class="line">            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">        <span class="bp">self</span><span class="o">.</span><span class="n">_fpga</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;fpga compress&#39;</span><span class="p">,</span><span class="s">&#39;fpga&#39;</span><span class="p">)</span>
</span><span class="line">        <span class="bp">self</span><span class="o">.</span><span class="n">_lpath</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;fpga compress&#39;</span><span class="p">,</span><span class="s">&#39;local_fpga_path&#39;</span><span class="p">)</span>
</span><span class="line">        <span class="bp">self</span><span class="o">.</span><span class="n">_rpath</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;fpga compress&#39;</span><span class="p">,</span><span class="s">&#39;remote_fpga_path&#39;</span><span class="p">)</span>
</span><span class="line">        <span class="bp">self</span><span class="o">.</span><span class="n">_oab</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;fpga compress&#39;</span><span class="p">,</span><span class="s">&#39;oab&#39;</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">        <span class="bp">self</span><span class="o">.</span><span class="n">_xlf</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;xlf build&#39;</span><span class="p">,</span><span class="s">&#39;xlf&#39;</span><span class="p">)</span>
</span><span class="line">        <span class="bp">self</span><span class="o">.</span><span class="n">_lmid</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;xlf build&#39;</span><span class="p">,</span><span class="s">&#39;lmid&#39;</span><span class="p">)</span>
</span><span class="line">        <span class="bp">self</span><span class="o">.</span><span class="n">_xpp</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;xlf build&#39;</span><span class="p">,</span><span class="s">&#39;xpp&#39;</span><span class="p">)</span>
</span><span class="line">        <span class="bp">self</span><span class="o">.</span><span class="n">_xdp</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;xlf build&#39;</span><span class="p">,</span><span class="s">&#39;xdp&#39;</span><span class="p">)</span>
</span><span class="line">        <span class="bp">self</span><span class="o">.</span><span class="n">_rru</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;xlf build&#39;</span><span class="p">,</span><span class="s">&#39;rru&#39;</span><span class="p">)</span>
</span><span class="line">        <span class="bp">self</span><span class="o">.</span><span class="n">_rruswdb</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;xlf build&#39;</span><span class="p">,</span><span class="s">&#39;rru_sw_db&#39;</span><span class="p">)</span>
</span><span class="line">        <span class="bp">self</span><span class="o">.</span><span class="n">_xpl</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;xlf build&#39;</span><span class="p">,</span><span class="s">&#39;xpl&#39;</span><span class="p">)</span>
</span><span class="line">        <span class="k">print</span><span class="p">(</span><span class="s">&quot;Your input fpga file is:&quot;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_lpath</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_fpga</span><span class="o">+</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
</span><span class="line">        <span class="k">print</span><span class="p">(</span><span class="s">&quot;Your ouput xlf file will be:&quot;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_xlf</span><span class="o">+</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">    <span class="sd">&quot;&quot;&quot;Run command on the server&quot;&quot;&quot;</span>
</span><span class="line">    <span class="k">def</span> <span class="nf">runCmd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">command</span><span class="p">):</span>
</span><span class="line">        <span class="sd">&quot;&quot;&quot;run &lt;command&gt;</span>
</span><span class="line"><span class="sd">        Execute this command on all hosts in the list&quot;&quot;&quot;</span>
</span><span class="line">        <span class="k">if</span> <span class="n">command</span><span class="p">:</span>
</span><span class="line">            <span class="n">stdin</span><span class="p">,</span> <span class="n">stdout</span><span class="p">,</span> <span class="n">stderr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ssh</span><span class="o">.</span><span class="n">exec_command</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>
</span><span class="line">            <span class="n">stdin</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span class="line">            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">stdout</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">splitlines</span><span class="p">():</span>
</span><span class="line">                <span class="k">print</span> <span class="n">line</span>
</span><span class="line">        <span class="k">else</span><span class="p">:</span>
</span><span class="line">            <span class="k">print</span> <span class="s">&quot;usage: run &lt;command&gt;&quot;</span>
</span><span class="line">
</span><span class="line">    <span class="sd">&quot;&quot;&quot;Upload the fpga and compress it to oab.bin&quot;&quot;&quot;</span>
</span><span class="line">    <span class="k">def</span> <span class="nf">createOab</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class="line">        <span class="bp">self</span><span class="o">.</span><span class="n">_sftp</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_lpath</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_fpga</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_rpath</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_fpga</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">        <span class="bp">self</span><span class="o">.</span><span class="n">runCmd</span><span class="p">(</span><span class="s">&quot;hou_create_fpga -bf </span><span class="se">\&quot;</span><span class="s">/home/ehholli/fpgainput/fpga.med</span><span class="se">\&quot;</span><span class="s"> -dn </span><span class="se">\&quot;</span><span class="s">CXC 172 8213/1</span><span class="se">\&quot;</span><span class="s"> -of oab -dev </span><span class="se">\&quot;</span><span class="s">XC2V6000,-4</span><span class="se">\&quot;</span><span class="s"> -dir /home/ehholli/fpgaoutput/&quot;</span><span class="p">)</span>
</span><span class="line">        <span class="k">try</span><span class="p">:</span>
</span><span class="line">            <span class="bp">self</span><span class="o">.</span><span class="n">_sftp</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_oab</span><span class="p">,</span><span class="s">&#39;oab.bin&#39;</span><span class="p">)</span>
</span><span class="line">            <span class="k">print</span><span class="p">(</span><span class="s">&quot;Fpga file compress successfully!&quot;</span><span class="p">)</span>
</span><span class="line">        <span class="k">except</span> <span class="ne">Exception</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
</span><span class="line">            <span class="k">print</span> <span class="s">&#39;*** Caught exception: </span><span class="si">%s</span><span class="s">: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</span><span class="line">            <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
</span><span class="line">            <span class="k">try</span><span class="p">:</span>
</span><span class="line">                <span class="bp">self</span><span class="o">.</span><span class="n">closeConn</span><span class="p">()</span>
</span><span class="line">            <span class="k">except</span><span class="p">:</span>
</span><span class="line">                <span class="k">pass</span>
</span><span class="line">            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">    <span class="sd">&quot;&quot;&quot;Make the tlf&quot;&quot;&quot;</span>
</span><span class="line">    <span class="k">def</span> <span class="nf">genXlf</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class="line">        <span class="c">#open a interactive shell</span>
</span><span class="line">        <span class="n">ct_chan</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_t</span><span class="o">.</span><span class="n">open_session</span><span class="p">()</span>
</span><span class="line">        <span class="n">ct_chan</span><span class="o">.</span><span class="n">setblocking</span><span class="p">()</span>
</span><span class="line">        <span class="n">ct_chan</span><span class="o">.</span><span class="n">get_pty</span><span class="p">()</span>
</span><span class="line">        <span class="n">ct_chan</span><span class="o">.</span><span class="n">invoke_shell</span><span class="p">()</span>
</span><span class="line">        <span class="c">#ct setview ehholli</span>
</span><span class="line">        <span class="k">if</span><span class="p">(</span><span class="n">ct_chan</span><span class="o">.</span><span class="n">send_ready</span><span class="p">()):</span>
</span><span class="line">            <span class="n">ct_chan</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s">&quot;ct setview ehholli</span><span class="se">\r\n</span><span class="s">&quot;</span><span class="p">)</span>
</span><span class="line">        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">        <span class="c">#compile</span>
</span><span class="line">        <span class="n">build_cmd</span><span class="o">=</span><span class="s">&quot;/vobs/rbs/hw/bcp/xp/deliv/solaris2/bin/xlf_gen -r &quot;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_xpp</span><span class="o">+</span><span class="s">&quot; &quot;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_xdp</span><span class="o">+</span><span class="s">&quot; &quot;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_rru</span> \
</span><span class="line">                     <span class="o">+</span><span class="s">&quot; -i &quot;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_oab</span><span class="o">+</span><span class="s">&quot; &quot;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_rruswdb</span> \
</span><span class="line">                     <span class="o">+</span><span class="s">&quot; -o /home/ehholli/tmp/&quot;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_xlf</span> \
</span><span class="line">                     <span class="o">+</span><span class="s">&quot; -x &quot;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_xpl</span> \
</span><span class="line">                     <span class="o">+</span><span class="s">&quot; -lmid </span><span class="se">\&quot;</span><span class="s">&quot;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_lmid</span><span class="o">+</span><span class="s">&quot;</span><span class="se">\&quot;</span><span class="s">&quot;</span> \
</span><span class="line">                     <span class="o">+</span><span class="s">&quot; -t </span><span class="se">\&quot;</span><span class="s">au_applic</span><span class="se">\&quot;</span><span class="s"> -v </span><span class="se">\r\n</span><span class="s">&quot;</span>
</span><span class="line">        <span class="k">print</span><span class="p">(</span><span class="n">build_cmd</span><span class="p">)</span>
</span><span class="line">        <span class="k">if</span><span class="p">(</span><span class="n">ct_chan</span><span class="o">.</span><span class="n">send_ready</span><span class="p">()):</span>
</span><span class="line">            <span class="n">ct_chan</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">build_cmd</span><span class="p">)</span>
</span><span class="line">        <span class="n">tCheck2</span> <span class="o">=</span>
</span><span class="line">        <span class="k">while</span> <span class="ow">not</span> <span class="n">ct_chan</span><span class="o">.</span><span class="n">recv_ready</span><span class="p">():</span>
</span><span class="line">            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</span><span class="line">            <span class="n">tCheck2</span><span class="o">+=</span><span class="mi">1</span>
</span><span class="line">            <span class="k">if</span> <span class="n">tCheck2</span> <span class="o">&gt;=</span> <span class="mi">6</span><span class="p">:</span>
</span><span class="line">                <span class="k">print</span> <span class="s">&#39;time out&#39;</span><span class="c">#TODO: add exeption here</span>
</span><span class="line">        <span class="k">print</span><span class="p">(</span><span class="n">ct_chan</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">65536</span><span class="p">))</span>
</span><span class="line">        <span class="n">ct_chan</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span class="line">        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</span><span class="line">        <span class="c">#download the xlf file</span>
</span><span class="line">        <span class="k">try</span><span class="p">:</span>
</span><span class="line">            <span class="bp">self</span><span class="o">.</span><span class="n">_sftp</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;/home/ehholli/tmp/&quot;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_xlf</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_xlf</span><span class="p">)</span>
</span><span class="line">            <span class="k">print</span><span class="p">(</span><span class="s">&quot;xlf file downloaded successfully!&quot;</span><span class="p">)</span>
</span><span class="line">        <span class="k">except</span> <span class="ne">Exception</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
</span><span class="line">            <span class="k">print</span> <span class="s">&#39;*** Caught exception: </span><span class="si">%s</span><span class="s">: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</span><span class="line">            <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
</span><span class="line">            <span class="k">try</span><span class="p">:</span>
</span><span class="line">                <span class="bp">self</span><span class="o">.</span><span class="n">closeConn</span><span class="p">()</span>
</span><span class="line">            <span class="k">except</span><span class="p">:</span>
</span><span class="line">                <span class="k">pass</span>
</span><span class="line">            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">    <span class="sd">&quot;&quot;&quot;Close everything we opened&quot;&quot;&quot;</span>
</span><span class="line">    <span class="k">def</span> <span class="nf">closeConn</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class="line">        <span class="bp">self</span><span class="o">.</span><span class="n">_ssh</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span class="line">        <span class="bp">self</span><span class="o">.</span><span class="n">_sftp</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span class="line">        <span class="bp">self</span><span class="o">.</span><span class="n">_t</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span class="line"><span class="k">if</span> <span class="n">__name__</span><span class="o">==</span><span class="s">&#39;__main__&#39;</span><span class="p">:</span>
</span><span class="line">    <span class="c"># setup logging</span>
</span><span class="line">    <span class="n">paramiko</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">log_to_file</span><span class="p">(</span><span class="s">&#39;demo_builder.log&#39;</span><span class="p">)</span>
</span><span class="line">    <span class="n">b</span><span class="o">=</span><span class="n">Builder</span><span class="p">(</span><span class="s">&#39;cfg.ini&#39;</span><span class="p">)</span>
</span><span class="line">    <span class="n">b</span><span class="o">.</span><span class="n">createOab</span><span class="p">()</span>
</span><span class="line">    <span class="n">b</span><span class="o">.</span><span class="n">genXlf</span><span class="p">()</span>
</span><span class="line">    <span class="c">#b.runCmd(&#39;ls&#39;)</span>
</span><span class="line">    <span class="n">b</span><span class="o">.</span><span class="n">closeConn</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/9/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/7/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    
  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Lenciel Li<span class="theme-version">Octopress-Lenciel 0.1</span>
  <section class="contruction-wrap">
    <div class="contruction"></div>
  </section>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'lencielgithub';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>



<!--














                                            IIIIIIIIII       I
                  II                     IIIIIIIIIIIIIIIIIIII
                  IIII                  IIIIIIIIIIIIIIIIIIII
                  IIIIII                IIIIIIIIIIIIIIIIII III
                  IIIIIIII             IIIIIIIIIIIIIIIIIIIIII
                  IIIIIIIIIII          IIIIIIIIIIIIIIIIIIIII
                  IIIIIIIIIIIIII       IIIIIIIIIIIIIIIIIII
                   IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII
                  I  IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII
                  IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII
                  IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII
                   IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII
                    IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII
                     IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII
                         IIIIIIIIIIIIIIIIIIIIIIIIIIIIIII
                     IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII
                      IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII
                        IIIIIIIIIIIIIIIIIIIIIIIIIIIII
                           IIIIIIIIIIIIIIIIIIIIIIIII
                             IIIIIIIIIIIIIIIIIIIII
                          IIIIIIIIIIIIIIIIIIIIIII
                I   IIIIIIIIIIIIIIIIIIIIIIIIII
                  IIIIIIIIIIIIIIIIIIIIIIIIII
                      IIIIIIIIIIIIIIIIII















 -->


</body>
</html>
