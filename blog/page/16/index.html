
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>@Lenciel</title>
  <meta name="author" content="Lenciel Li">

  
  <meta name="description" content="在从公司辞职出来的之前，我们对创业的期望是不降低大家的生活质量。我们对自己这么说，对我们拉入伙的兄弟们也这么说。这里的生活质量当然除开收入之外，很大的一方面就是不加班。 但是实际上的情况是：五一之前整个公司度过了一个非常特别的时期：产品团队不停地根据用户的输入，修改产品需求； &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://lenciel.cn/blog/page/16/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/data-table.css" media="screen, projection" rel="stylesheet" type="text/css" />
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="http://feeds.feedburner.com/github/lenciel" rel="alternate" title="@Lenciel" type="application/atom+xml">
  <!-- Facebook Open Graph
     Facebook Debugger: https://developers.facebook.com/tools/debug -->

<meta property="og:type" content="article" />
<meta property="og:url" content="http://lenciel.cn/blog/page/16/" />
<meta property="og:description" content="在从公司辞职出来的之前，我们对创业的期望是不降低大家的生活质量。我们对自己这么说，对我们拉入伙的兄弟们也这么说。这里的生活质量当然除开收入之外，很大的一方面就是不加班。 但是实际上的情况是：五一之前整个公司度过了一个非常特别的时期：产品团队不停地根据用户的输入，修改产品需求； &hellip;" />

<meta property="og:site_name" content="http://lenciel.cn" />
<meta property="article:author" content="http://lenciel.cn">



<meta itemprop="description" content="在从公司辞职出来的之前，我们对创业的期望是不降低大家的生活质量。我们对自己这么说，对我们拉入伙的兄弟们也这么说。这里的生活质量当然除开收入之外，很大的一方面就是不加班。 但是实际上的情况是：五一之前整个公司度过了一个非常特别的时期：产品团队不停地根据用户的输入，修改产品需求； &hellip;" />

<!-- Combine multiple fonts into one request -->
<!--<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic|Patua+One|Yanone+Kaffeesatz" rel="stylesheet" type="text/css">-->
<link href="http://fonts.useso.com/css?family=PT+Sans:regular,italic,bold,bolditalic|Patua+One|Yanone+Kaffeesatz" rel="stylesheet" type="text/css">
<!--<style>
  @font-face {
  font-family: 'PT Sans';
  font-style: normal;
  font-weight: 400;
  src: local('PT Sans'), local('PTSans-Regular'), url('http://lenciel.cn/fonts/PTSans-Regular.woff') format('woff');
}
@font-face {
  font-family: 'PT Sans';
  font-style: normal;
  font-weight: 700;
  src: local('PT Sans Bold'), local('PTSans-Bold'), url('http://lenciel.cn/fonts/PTSans-Bold.woff') format('woff');
}
@font-face {
  font-family: 'PT Sans';
  font-style: italic;
  font-weight: 400;
  src: local('PT Sans Italic'), local('PTSans-Italic'), url('http://lenciel.cn/fonts/PTSans-Italic.woff') format('woff');
}
@font-face {
  font-family: 'PT Sans';
  font-style: italic;
  font-weight: 700;
  src: local('PT Sans Bold Italic'), local('PTSans-BoldItalic'), url('http://lenciel.cn/fonts/PTSans-BoldItalic.woff') format('woff');
}
@font-face {
  font-family: 'Patua One';
  font-style: normal;
  font-weight: 400;
  src: local('Patua One'), local('PatuaOne-Regular'), url('http://lenciel.cn/fonts/PatuaOne-Regular.woff') format('woff');
}
@font-face {
  font-family: 'Yanone Kaffeesatz';
  font-style: normal;
  font-weight: 400;
  src: local('Yanone Kaffeesatz Regular'), local('YanoneKaffeesatz-Regular'), url('http://lenciel.cn/fonts/YanoneKaffeesatz-Regular.woff') format('woff');
}
</style>-->
<!-- jQuery -->
<!--<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>-->
<script src="//upcdn.b0.upaiyun.com/libs/jquery/jquery-1.7.2.min.js">

  <script type="text/javascript">
    var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
    document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F2f0a0a00f439ab96a80a199638ef8594' type='text/javascript'%3E%3C/script%3E"));
</script>


  
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-175991-3', 'lenciel.cn');
  ga('send', 'pageview');

</script>


</head>

<body    class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/">@Lenciel</a></h1>
  
    <h2>Thoughts and Rants.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/github/lenciel" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:lenciel.cn" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/"><i class="icon-home"></i>Home</a></li>
  <li><a href="/blog/archives"><i class="icon-book-alt"></i>Archives</a><span class="divider"></span></li>
  <li><a href="/about"><i class="icon-user"></i>About</a><span class="divider"></span></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2013/05/the-myth-of-productivity/">The Myth of Productivity</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-05-02T01:11:00+08:00" pubdate data-updated="true">2013/05/02 01:11</time>
        
         | <a href="/2013/05/the-myth-of-productivity/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>在从公司辞职出来的之前，我们对创业的期望是不降低大家的生活质量。我们对自己这么说，对我们拉入伙的兄弟们也这么说。这里的生活质量当然除开收入之外，很大的一方面就是不加班。</p>

<p>但是实际上的情况是：五一之前整个公司度过了一个非常特别的时期：产品团队不停地根据用户的输入，修改产品需求；服务器端和客户端两个开发组都疯狂加班，彻夜不眠；测试每天没有东西可以测试。</p>

<p>假期我回忆了一下自己参与过的所有的软件项目，大到IBM的存储或者Ericsson的基站，小到自己做着玩的一些prototype，有跨时区的几个团队合作的，也有每天都可以互相抛媚眼的死党一起撸的，它们有一个共同的特点：居然没有一个是能够按照预估的时间交付的。</p>

<p>假期我和一个老一辈无产阶级革命家聊起了这个问题：每次一个项目出现这样那样的情况，不能按时交付，我们都反思、开会、总结，希望下一个项目能吸取所有的经验，不再犯同样的错误。为什么最后的结果还是一样？</p>

<p>他推荐了Daniel Kahneman的<a href="http://vdisk.weibo.com/s/8nUJx">Thinking, Fast and Slow</a>。这是一本心理学著作，探讨了人类认知的很多方面，其中有不少观点挺值得软件开发从业人员思考的，特别是想不明白为什么我们做的estimation永远不准的软件从业人员。</p>

<h2 id="section">原因一：开发软件面向的问题域在你深入之前是不完全可知的</h2>

<p>可以通过编写软件完美解决一个问题的前提是，我们对问题域了解得“足够深入”，以至于我们可以细致而精确地告诉计算机“如何”解决一个问题。</p>

<p>但是矛盾的地方在于，一般我们了解到这个程度的问题，都已经有现成的软件或者是库了。需要我们进行开发的总是来自一些新需求：引入不确定性的那些新需求。</p>

<p>新需求引入的不确定性是多方面的：第三方接口提供者不能按时提供可靠的接口，所以你要自己做适配；选定的数据库服务器之间不能互联互通需要VPS提供商开通3306端口互访。当然，不那么具体但是绝对会遇到的不确定性一般来自客户：产品release了，但是他们发现自己需要的并不他们最开始描述的这个东西，他们要这里那里做一些“小改动”…</p>

<p>这其实也是历史上钻出来那么多specification文档的原因：有一些管理层希望能通过在文档阶段对需求足够细化来避免不确定性对项目的影响。但结果大家都知道了，细化的文档被整个软件行业唾弃的原因是越来越多的证据说明，如果你掌握的细节足够多，你就该直接去写软件。如果你掌握的细节不够多，那么写文档也没足够细的可能。</p>

<p>有趣的地方在于，无论做工程师的时候大家对估开发时间多么的不屑，一旦到了管理层，你工作的核心就是估开发时间。而且有不少前一个月还在为没有按时delivery睡不着的苦逼工程师，一升到管理层就无比相信自己估的开发时间了。无论项目的实际情况如何，他们都会push整个团队苦干蛮干，这就是另外一个问题了。</p>

<h2 id="section-1">原因二：过度自信和效率神话</h2>

<p>这次雅安地震那位预测四川多少多少年不会有大地震的专家又成了笑柄。这当然不是专家第一次或者最后一次因为错误的预测成为笑柄。Kahneman在书里面专门花了一些篇幅写“专家”的预测为什么在大多数情况下是毫无用处的，最核心的三点在于：</p>

<ul>
  <li>事实证明专家的预测常常会出错</li>
  <li>但作出预测的专家会对自己有绝对的自信</li>
  <li>即便后来发现自己的预测是错误的，专家对自己的自信不会减少</li>
</ul>

<p>最后这一点特别有趣。即便事实证明预测是错误的，即便明白只是人类认知中必然可能出现的问题，专家仍然会对自己的预测继续充满自信。原因何在？</p>

<h2 id="iii">系统I/系统II以及我们是如何做预估的</h2>

<p>在<a href="http://vdisk.weibo.com/s/8nUJx">Thinking, Fast and Slow</a>里面Kahneman的解释了人类其实有两套决策系统：系统II负责谨慎、理性、分析性的思考；系统I复杂快速、基于模式、基于直觉的思考。</p>

<p>重要的是，在进化的过程中，一个主要变化就是系统II慢慢少被使用了：耗时长的系统，仅仅在极其少的必须的情况下被唤醒。但是这里有个显而易见的矛盾是，如果没有经过思考，你怎么知道应该使用系统I还是系统II呢？</p>

<p>这就是做预估的时候总是估不准的根本原因。做预估的时候，因为你是要在没有仔细分析（甚至一般也没用仔细分析的输入）的情况下使用系统I来做出判断。所以你的预估“一个任务需要花多少时间”的时候，其实多半是在根据“这个任务你有多少自信”。</p>

<p>所以，一般来说我们报这个任务我需要3天的时候，其实是因为“这个东西看起来非常简单，而且我十分清楚如何做”。如果报这个任务我需要3个月，则是因为“这个东西看起来很难，我也不知道怎么做，但是我相信我能搞懂是怎么做”。</p>

<h2 id="section-2">避免凭直觉做预估就能得到准确预估吗?</h2>

<p>你看到这里肯定会觉得，为了避免这些虚幻的估计，我们应该通过各种手段使用系统II来通过仔细地分析得到准确的数据。</p>

<p>Bravo！恭喜你发明了“瀑布开发流程”。基本上来说”在开始编码之前我们先编写文档”就是为了让你切换到系统II。但是为什么使用瀑布的项目也会失败？</p>

<p>说白了，还是软件开发在初始阶段即使使用系统II也不能做出精确的判断：知道的太少，变化的太多。那么究竟该怎么办？</p>

<h2 id="section-3">什么样的预测是比较有效的？</h2>

<p>Kahneman和其他一些专家通过研究，得出了什么时候做预测是比较保险的：</p>

<blockquote>
  <p>“To know whether you can trust a particular intuitive judgment, there are two questions you should ask: Is the environment in which the judgment is made sufficiently regular to enable predictions from the available evidence? The answer is yes for diagnosticians, no for stock pickers. Do the professionals have an adequate opportunity to learn the cues and the regularities?”</p>
</blockquote>

<p>这里的”adequate opportunity”意味着大量的实践经验用于可控的周期内的稳定环境中，并且具备了反馈机制可以随时修正准确度。以此为根据，0-12个小时的task，如果这些task一被建立就能立刻得到执行，那么：</p>

<ul>
  <li>在这么短的时间内，虽然仍然有可能会出现变化，基本环境应该是稳定的</li>
  <li>你可以很快的得到结果并且知道自己估计的准确度</li>
</ul>

<p>在这种情况下，你是尽可能的先利用系统I开始工作，并且通过迅速得到的反馈来修正自己的结果，达到目标。</p>

<h2 id="section-4">打破效率神话</h2>

<p>创业团队出现过于乐观的估计除开过度自信之外，还有很重要的一个原因是因为相信效率神话。Evernote，AnyDo，OmniFocus等等GTD工具和各种关于同时做n件事情还每件都做好的江湖传说很容易把焦头烂额的创业团队坑进去。接受你不可能做出一个准确的预估然后向客户承诺的事实，转而思考如何在规定时间内最大化的输出对客户有用的价值时，关于效率需要牢记下面的事实：</p>

<ul>
  <li>一天只有24个小时，即使团队的沟通成本很低，仍然需要在使用你们选用的agile工具，开会，互相之间同步信息，迭代和对外汇报等等上花时间；</li>
  <li>人的生活还有各种不确定性，如生病、怀孕、过劳、休假、结婚、家长会、禽流感等等；</li>
  <li>你的系统会有一些非常难以找到root cause的bug需要花你估计的十倍以上的时间才能根除</li>
  <li>你的客户会给你各种乱七八糟的输入并且提出各种来时已晚的需求</li>
  <li><a href="https://medium.com/r/?url=http%3A%2F%2Fwww.inc.com%2Fjessica-stillman%2Fwhy-working-more-than-40-hours-a-week-is-useless.html">一周工作的超过40个小时之后的部分已经被认为是无效的</a></li>
  <li><a href="https://medium.com/r/?url=http%3A%2F%2Flifehacker.com%2F246988%2Fmultitasking-makes-you-less-productive-%2B-take-ten">工作被打断后需要15到20分钟才能恢复</a></li>
  <li><a href="https://medium.com/r/?url=http%3A%2F%2Fwww.kens5.com%2Fnews%2FStudy-Average-worker-spends-60-percent-of-time-cyberloafing-190195401.html">人们上班的时候花了非常多的时间干和工作无关的事情</a></li>
</ul>

<p>接受现实，摒弃对效率神话的膜拜，用心思考在有限的时间内如何最大化的输出对用户有价值的东西，比任何流程、方法论、工具都要重要。这一方面在团队内部倡导了一种科学并且诚实的做事方式，一方面会让你更能分清工作任务和资源的优先级。它最大的好处是让你专心地根据实际的优先级做出判断，把精力放到最关键的事情上去。</p>

<p>这，是对整个团队最重要的事情。</p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2013/04/use-kaleidoscope-as-code-review-tool/">Use Kaleidoscope as Code Review Tool</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-04-14T20:57:00+08:00" pubdate data-updated="true">2013/04/14 20:57</time>
        
         | <a href="/2013/04/use-kaleidoscope-as-code-review-tool/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>个人觉得Mac上最好用的文件/文件夹比较工具应该就是Kaleidoscope了。在它的<a href="http://kaleidoscopeapp.com/beta">新版本</a>中新增了 <code>KSReview</code> 功能，比较有用。</p>

<p>举个常见的场景：如果 <code>master</code> 分支下有两个人lenciel和ming在做事。如果ming的事情先做完，代码上了master分支。这个时候lenciel做diff的时候，因为主分支的文件已经发生过变化，那么我们diff的结果哪些是自己的开发分支与主分支的差异哪些是ming引入的，就要靠“人工智能”来肉身体察了。</p>

<p>而 <code>KSReview</code> 会只收集开发者自己的开发分支和主分支之间的差异，过滤掉无关的信息，这样改动就非常清晰了。它的安装方便，只需要在命令行里面敲入：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">git config --global alias.ksreview <span class="s1">&#39;!f() { local SHA=${1:-HEAD}; local BRANCH=${2:-master}; if [ $SHA == $BRANCH ]; then SHA=HEAD; fi; git difftool -y -t Kaleidoscope $BRANCH...$SHA; }; f&#39;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>安装完毕之后就可以用下面的命令来做diff了：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">git ksreview feature-branch-name-or-sha mainline-branch-name
</span></code></pre></td></tr></table></div></figure></notextile></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2013/04/first-steps-on-a-new-server/">First Steps on a New Server</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-04-04T08:44:00+08:00" pubdate data-updated="true">2013/04/04 08:44</time>
        
         | <a href="/2013/04/first-steps-on-a-new-server/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>一般来说，新开张的小团队不会养专职的运维和部署团队。一般服务器开发的项目组会有人兼职做这部分的事情。刚开始的时候这部分的工作量一般也不大，但是随着租用的服务器越来越多，兼职的人就会发现自己是在打上甘岭战役————坡越来越陡。</p>

<p>因此，一个简单而有效的标准流程是非常必要的。ZooM团队的服务器都会配置两个固定的帐号： <code>root</code> 和 <code>deploy</code> 。 <code>deploy</code>  这个用户具有 <code>sudo</code> 的权限。开发人员使用deploy但是不通过用户名密码登录而是用 <code>public key</code> 。这样一来，只需要保证所有机器的 <code>authorized_keys</code> 文件同步即可。后面要做的改进是：</p>

<ul>
  <li>在所有机器禁止通过 root 账号进行ssh</li>
  <li>在所有机器上限制可以ssh的IP范围</li>
</ul>

<p>这样的实施方案对 <code>authorized_keys</code> 的保密性和正确性要求是很高的，但是在没有专门IT的时候，对我们这样的小团队基本是够用的。下面是详细的步骤：</p>

<p>我们拿到的第一台机器是Ubuntu的，因为 <code>Gitlab</code> 只有Debian的版本。后面的机器大多会是CentOS，所以使用的命令可能会稍微有调整，但是意思是不变的。</p>

<h2 id="root">更换root密码</h2>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">passwd
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>可以很长很复杂（反正也不需要记得），保存在某个地方在你忘记 <code>sudo</code> 密码或者是不能正常 <code>ssh</code> 的时候能找出来用就可以了。</p>

<h2 id="section">更新系统</h2>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">apt-get update
</span><span class="line">apt-get upgrade
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h2 id="fail2ban">安装Fail2ban</h2>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">apt-get install fail2ban
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Fail2ban是一个用来监控登录尝试的 <code>daemon</code> ，可以有效侦测和防止可疑行为的发生。这个工具文档很全，而且出厂配置就很齐全，几乎不需要定制就能投入使用了。</p>

<h2 id="deploy">添加deploy用户</h2>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">useradd deploy
</span><span class="line">mkdir /home/deploy
</span><span class="line">mkdir /home/deploy/.ssh
</span><span class="line">chmod 700 /home/deploy/.ssh
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h2 id="public-key">配置 <code>public key</code></h2>

<p>使用密码的日子已经慢慢过时了，这方面Github很有<a href="https://help.github.com/categories/56/articles">贡献</a>。只需要：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">vim /home/deploy/.ssh/authorized_keys
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>把 <code>id_rsa.pub</code> 的内容拷贝进去。然后：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">chmod 400 /home/deploy/.ssh/authorized_keys
</span><span class="line">chown deploy:deploy /home/deploy -R
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>当然你也可以使用 <code>id_rsa.pub</code> 之外的key，然后在本地的 <code>~/.ssh/config</code> 里面对 <code>IdentityFile</code> 做指定。具体方式可以查看 <code>~/.ssh/config</code>的说明。</p>

<h2 id="deploy-sudo-">测试deploy用户并赋予 <code>Sudo</code> 权限</h2>

<p>先测试deploy是否能够正常登录，然后使用 <code>root</code> 账号设置密码：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">passwd deploy
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>这是团队要用来 <code>sudo</code> 的账号，所以要弄得有意义好记一点儿。接下来：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">visudo
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>注释掉所以已经存在的用户、用户组权限，然后加上：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">root    <span class="nv">ALL</span><span class="o">=(</span>ALL<span class="o">)</span> ALL
</span><span class="line">deploy  <span class="nv">ALL</span><span class="o">=(</span>ALL<span class="o">)</span> ALL
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h2 id="ssh">锁定SSH</h2>

<p>设置ssh，禁止使用密码ssh，禁止使用 <code>root</code> 账号ssh。</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">vim /etc/ssh/sshd_config
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>添加下面的设置：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">PermitRootLogin no
</span><span class="line">PasswordAuthentication no
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>如果有需要还可以限定可以ssh的ip地址：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">AllowUsers deploy@<span class="o">(</span>your-ip<span class="o">)</span> deploy@<span class="o">(</span>another-ip-if-any<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
<p>重启ssh：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">service ssh restart
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h2 id="section-1">设置防火墙</h2>

<p>Ubuntu提供了 <code>ufw</code>，所以只需要：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">ufw allow from <span class="o">{</span>your-ip<span class="o">}</span> to any port 22
</span><span class="line">ufw allow 80
</span><span class="line">ufw allow 443
</span><span class="line">ufw <span class="nb">enable</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h2 id="section-2">打开自动安全更新</h2>

<p>虽然很多习惯好的服务器使用者会知道运行<code>apt-get update/upgrade</code> 但是如果服务器很多，总会有一些不那么被经常登录的机器，系统会比较陈旧。特别是做负载均衡的机器，可能很少有人登录。为了保证所有的机器都有足够的安全性需要打开自动更新（作为习惯控制一切的开发人员，自动更新总是一件让我很抗拒的事情，但是安全漏洞更让人抗拒）：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">apt-get install unattended-upgrades
</span><span class="line">vim /etc/apt/apt.conf.d/10periodic
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>在文件里面修改成：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">APT::Periodic::Update-Package-Lists <span class="s2">&quot;1&quot;</span>;
</span><span class="line">APT::Periodic::Download-Upgradeable-Packages <span class="s2">&quot;1&quot;</span>;
</span><span class="line">APT::Periodic::AutocleanInterval <span class="s2">&quot;7&quot;</span>;
</span><span class="line">APT::Periodic::Unattended-Upgrade <span class="s2">&quot;1&quot;</span>;
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>接着修改：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">vim /etc/apt/apt.conf.d/50unattended-upgrades
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>修改文件成：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">Unattended-Upgrade::Allowed-Origins <span class="o">{</span>
</span><span class="line">    <span class="s2">&quot;Ubuntu lucid-security&quot;</span>;
</span><span class="line">    //<span class="s2">&quot;Ubuntu lucid-updates&quot;</span>; 只更新安全更新
</span><span class="line"><span class="o">}</span>;
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h2 id="logwatch">安装Logwatch</h2>

<p>Logwatch是一个监控你的日志并发送邮件通知的daemon。</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">apt-get install logwatch
</span><span class="line">vim /etc/cron.daily/00logwatch
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>在文件中添加：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">/usr/sbin/logwatch --output mail --mailto lenciel@gmail.com --detail high
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h2 id="whats-next">What’s Next</h2>

<ul>
  <li>使用Puppet自动化这些配置</li>
  <li>在基础的配置上，把一个fresh的机器如果配置成各种形态的（Django/Web/Database/LoadBalance/…)</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2013/03/boxen-introduction/">Boxen Introduction</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-03-31T08:28:00+08:00" pubdate data-updated="true">2013/03/31 08:28</time>
        
         | <a href="/2013/03/boxen-introduction/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>如果列举开发人员在工作中最讨厌的部分，估计搭建开发环境得票率肯定可以排进前三。年初Github开源了自己内部的Privision框架<a href="http://boxen.github.com/">Boxen</a>，趁着新笔记本需要起轿，尝试了一把。</p>

<h2 id="boxen">Boxen框架简介</h2>

<p>Boxen基于大红大紫的<a href="https://puppetlabs.com/">Puppet</a>，但和后者目前主要侧重于服务器的Privision不同，Boxen更主要是用于组织内工作人员使用的机器的配置和管理流程标准化。</p>

<p>配置流程标准化比较好理解：拿到一台机器，敲一个命令就把所有需要的软件装上并且把环境配置好。按Boxen主页上的说法，Github新员工入职后领到电脑后，用Boxen配置环境到开始写代码只需要30分钟。</p>

<p>管理流程标准化听起来比较抽象，你可以想象这么一个场景：如果公司里面所有的机器都是是用Boxen来配置的。当发现Chrome浏览器的Java插件会导致安全问题的时候，IT部门可以push一个禁用Chrome里Java插件的change到boxen repo。所有的员工只需要和repo做一次sync，自己的Chrome里的Java插件就被禁用了。这显然比传统的发邮件要求大家去禁用Chrome浏览器Java插件简单有效。</p>

<p>简单地概括Boxen的思路，就是像对待产品一样对待开发环境。使用包括版本控制，持续集成这些手段，在团队中维护一个开发环境的仓库。如果你想更深入地了解Boxen的设计哲学，可以看看这个slide：<a href="https://speakerdeck.com/wfarr/boxen">BOXEN by Will Farrington</a>。</p>

<h2 id="boxen-1">使用Boxen</h2>

<p>首先确保你的初始环境是干净的：</p>

<ul>
  <li>如果你手上是台新机器，它是干净的</li>
  <li>
    <p>如果不是一台新机器，请先备份，然后：</p>

    <ul>
      <li>卸载Homebrew</li>
      <li>删除所有的 <code>dotfiles</code> 和 <code>vimfiles</code> ，比如<a href="https://github.com/robbyrussell/oh-my-zsh">Oh my zsh</a>或者<a href="https://github.com/spf13/spf13-vim">spf13 vim</a>等</li>
      <li>删除 <code>.rbenv</code> 或者 <code>.rvm</code> 文件夹</li>
      <li><code>chsh -s /bin/bash</code> 把SHELL改回 <code>bash</code></li>
    </ul>
  </li>
</ul>

<p>接下来就是安装一些必须的软件，比如Git和Xcode的 <code>Command Line Tools</code>。</p>

<h3 id="xcode-clt">Xcode CLT</h3>

<ul>
  <li>升级Xcode</li>
  <li>启动Xcode，在Preferences里面选择下载</li>
  <li>安装”Command Line Tools”</li>
</ul>

<p><img src="/downloads/images/xcode_clt.png" alt="Xcode Command Line Tools" title="Don't touch me..." /></p>

<h3 id="firevault2">打开FireVault2</h3>

<p>Boxen默认会希望硬盘信息是被加密的：</p>

<p><img src="/downloads/images/turn_on_fire_vault.png" alt="Turn on FireVault2" title="Don't touch me..." /></p>

<h3 id="fork-our-boxen">Fork our-boxen</h3>

<p><a href="https://github.com/boxen/our-boxen">our-boxen</a>是Boxen提供的基线repo，也是整个Boxen框架里面文档最全的一个repo。</p>

<p>首先按照repo说明中的方式来clone和配置本地repo：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">sudo mkdir -p /opt/boxen
</span><span class="line">sudo chown <span class="k">${</span><span class="nv">USER</span><span class="k">}</span>:admin /opt/boxen
</span><span class="line">git clone https://github.com/boxen/our-boxen /opt/boxen/repo
</span><span class="line"><span class="nb">cd</span> /opt/boxen/repo
</span><span class="line">git remote rm origin
</span><span class="line">git remote add origin
</span><span class="line">git push -u origin master
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>这种clone下来再配置origin的方式类似于fork，区别是fork下来的repo一定是public的，而这样得到的repo可以是private的。可以想象如果你使用boxen来完成对公司电脑的配置，多少都会有一些敏感信息在repo里面，所以private的repo是非常必要的。</p>

<p>接下来在 <code>/opt/boxen/repo</code> 路径下运行 <code>script/boxen</code> 即可完成boxen默认的模块的安装。默认的模块定义在 <code>/opt/boxen/repo/Puppetfile</code> 中：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="n">github</span> <span class="s2">&quot;dnsmasq&quot;</span><span class="p">,</span>  <span class="s2">&quot;1.0.0&quot;</span>
</span><span class="line"><span class="n">github</span> <span class="s2">&quot;gcc&quot;</span><span class="p">,</span>      <span class="s2">&quot;1.0.0&quot;</span>
</span><span class="line"><span class="n">github</span> <span class="s2">&quot;git&quot;</span><span class="p">,</span>      <span class="s2">&quot;1.0.0&quot;</span>
</span><span class="line"><span class="n">github</span> <span class="s2">&quot;homebrew&quot;</span><span class="p">,</span> <span class="s2">&quot;1.0.0&quot;</span>
</span><span class="line"><span class="n">github</span> <span class="s2">&quot;hub&quot;</span><span class="p">,</span>      <span class="s2">&quot;1.0.0&quot;</span>
</span><span class="line"><span class="n">github</span> <span class="s2">&quot;inifile&quot;</span><span class="p">,</span>  <span class="s2">&quot;0.9.0&quot;</span><span class="p">,</span> <span class="ss">:repo</span> <span class="o">=&gt;</span> <span class="s2">&quot;cprice-puppet/puppetlabs-inifile&quot;</span>
</span><span class="line"><span class="n">github</span> <span class="s2">&quot;nginx&quot;</span><span class="p">,</span>    <span class="s2">&quot;1.0.0&quot;</span>
</span><span class="line"><span class="n">github</span> <span class="s2">&quot;nodejs&quot;</span><span class="p">,</span>   <span class="s2">&quot;1.0.0&quot;</span>
</span><span class="line"><span class="n">github</span> <span class="s2">&quot;nvm&quot;</span><span class="p">,</span>      <span class="s2">&quot;1.0.0&quot;</span>
</span><span class="line"><span class="n">github</span> <span class="s2">&quot;ruby&quot;</span><span class="p">,</span>     <span class="s2">&quot;1.0.0&quot;</span>
</span><span class="line"><span class="n">github</span> <span class="s2">&quot;stdlib&quot;</span><span class="p">,</span>   <span class="s2">&quot;3.0.0&quot;</span><span class="p">,</span> <span class="ss">:repo</span> <span class="o">=&gt;</span> <span class="s2">&quot;puppetlabs/puppetlabs-stdlib&quot;</span>
</span><span class="line"><span class="n">github</span> <span class="s2">&quot;sudo&quot;</span><span class="p">,</span>     <span class="s2">&quot;1.0.0&quot;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>可以看到Github大量用到 <code>ruby</code> 和 <code>nodejs</code> 。在运行boxen的时候，可能会看到大量的警告信息：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="ss">Warning</span><span class="p">:</span> <span class="no">Could</span> <span class="ow">not</span> <span class="n">retrieve</span> <span class="n">fact</span> <span class="n">fqdn</span>
</span><span class="line"><span class="ss">Warning</span><span class="p">:</span> <span class="no">Host</span> <span class="n">is</span> <span class="n">missing</span> <span class="n">hostname</span> <span class="ow">and</span><span class="o">/</span><span class="ow">or</span> <span class="ss">domain</span><span class="p">:</span> <span class="n">suttlemac</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>然后伴随着 <code>https://rubygems.org</code> 失败。这些主要是因为GFW，你可以使用镜像，比如淘宝的。具体方式可以<a href="http://ruby.taobao.org/">查看这里</a>。</p>

<p>注意你还应该把下面的脚本加到 <code>~/.bashrc</code> 或者 <code>~/.zshrc</code> :</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="o">[</span> -f /opt/boxen/env.sh <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="nb">source</span> /opt/boxen/env.sh
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>然后新开一个shell运行 <code>boxen --env</code>，结果一切正常你的box就配置完毕了。</p>

<h2 id="box">自定义你的box</h2>

<p>默认安装的内容当然不一定对你的口味，如果你用过Puppet那么自定义Boxen的box是非常简单的。不过埋头开干之前还是可以check一下是不是已经<a href="https://github.com/boxen">有人做好了</a>。这些做好的repo可以直接通过修改配置文件是用，因为Boxen对librarian-puppet做了wrapper，对fetch各种module也做了wrapper。</p>

<p>比如我们要安装Chrome和Skype，打开 <code>/opt/boxen/repo/Puppetfile</code> 并添加两行：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="o">.</span><span class="n">.</span><span class="o">.</span>
</span><span class="line"><span class="n">github</span> <span class="s2">&quot;sudo&quot;</span><span class="p">,</span>     <span class="s2">&quot;1.0.0&quot;</span>
</span><span class="line">
</span><span class="line"><span class="c1"># Add new modules</span>
</span><span class="line"><span class="n">github</span> <span class="s2">&quot;skype&quot;</span><span class="p">,</span>    <span class="s2">&quot;1.0.2&quot;</span>
</span><span class="line"><span class="n">github</span> <span class="s2">&quot;chrome&quot;</span><span class="p">,</span>   <span class="s2">&quot;1.1.0&quot;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>这里安装的module的声明规则是 <code>github "{name}", "{version}"</code>。 其中 <code>name</code> 的取法是在 <code>Puppetfile</code> 里面定义的：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="k">def</span> <span class="nf">github</span><span class="p">(</span><span class="nb">name</span><span class="p">,</span> <span class="n">version</span><span class="p">,</span> <span class="n">options</span> <span class="o">=</span> <span class="kp">nil</span><span class="p">)</span>
</span><span class="line">  <span class="n">options</span> <span class="o">||=</span> <span class="p">{}</span>
</span><span class="line">  <span class="n">options</span><span class="o">[</span><span class="ss">:repo</span><span class="o">]</span> <span class="o">||=</span> <span class="s2">&quot;boxen/puppet-</span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class="line">  <span class="n">mod</span> <span class="nb">name</span><span class="p">,</span> <span class="n">version</span><span class="p">,</span> <span class="ss">:github_tarball</span> <span class="o">=&gt;</span> <span class="n">options</span><span class="o">[</span><span class="ss">:repo</span><span class="o">]</span>
</span><span class="line"><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>因此<a href="https://github.com/boxen/puppet-skype">puppet-skype</a>对应的就是 <code>skype</code> 。</p>

<p>而 <code>version</code> 则是对应具体repo的tag，比如<a href="https://github.com/boxen/puppet-skype">puppet-skype</a>对应的<a href="https://github.com/boxen/puppet-skype/tags">tag</a>有：</p>

<p><img src="/downloads/images/version_tag.png" alt="Version and tags" title="Don't touch me..." /></p>

<p>如果你的repo不是在github也很简单，只需要指定repo的位置即可。比如如果你自己的Skype是放在Bitbucket上的:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line">   <span class="n">mod</span> <span class="s2">&quot;skype&quot;</span><span class="p">,</span> <span class="ss">:git</span> <span class="o">=&gt;</span> <span class="s2">&quot;git@bitbucket.org:yourusername/puppet-skype.git&quot;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>在 <code>Puppetfile</code> 里面完成的声明主要是让Boxen（实际上是Puppet）知道去哪里找安装和配置文件。要告诉Boxen安装Skype还需要在 <code>manifests/site.pp</code> 里面 <code>include</code> 需要安装的module：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="o">.</span><span class="n">.</span><span class="o">.</span>
</span><span class="line">    <span class="n">node</span> <span class="n">default</span> <span class="p">{</span>
</span><span class="line">        <span class="kp">include</span> <span class="n">dnsmasq</span>
</span><span class="line">        <span class="kp">include</span> <span class="n">ruby</span>
</span><span class="line">        <span class="kp">include</span> <span class="n">git</span>
</span><span class="line">        <span class="kp">include</span> <span class="n">hub</span>
</span><span class="line">        <span class="kp">include</span> <span class="n">homebrew</span>
</span><span class="line">        <span class="kp">include</span> <span class="n">skype</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line"><span class="o">.</span><span class="n">.</span><span class="o">.</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>接下来只需要运行 <code>boxen</code> (如果你运行了 <code>boxen --env</code> 命令会在可执行路径里)或者是 <code>boxen --debug</code> (如果你需要更多的verbose信息)，指定的软件就安装上了。</p>

<h2 id="whats-next">What’s Next</h2>

<p>目前为止主要是解释了如何使用Boxen来安装一些基本软件。目前本座机器上使用Boxen安装的软件包括：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="n">github</span> <span class="s2">&quot;ccleaner&quot;</span><span class="p">,</span> <span class="s2">&quot;1.0.1&quot;</span>
</span><span class="line"><span class="n">github</span> <span class="s2">&quot;iterm2&quot;</span><span class="p">,</span>   <span class="s2">&quot;1.0.2&quot;</span>
</span><span class="line"><span class="n">github</span> <span class="s2">&quot;skype&quot;</span><span class="p">,</span>    <span class="s2">&quot;1.0.2&quot;</span>
</span><span class="line"><span class="n">github</span> <span class="s2">&quot;chrome&quot;</span><span class="p">,</span>   <span class="s2">&quot;1.1.0&quot;</span>
</span><span class="line"><span class="n">github</span> <span class="s2">&quot;sublime_text_2&quot;</span><span class="p">,</span>   <span class="s2">&quot;1.1.0&quot;</span>
</span><span class="line"><span class="n">github</span> <span class="s2">&quot;jumpcut&quot;</span><span class="p">,</span>   <span class="s2">&quot;1.0.0&quot;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>接下来的计划就是建立项目组自己的repo，把诸如输入法、dotfiles、Java开发环境和Django开发环境这些东西的安装和配置都自动化了。</p>

</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/17/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/15/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    
  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
Blog theme: <a href="https://github.com/lenciel/octopress-theme-lenciel">Octopress-Lenciel 0.1</a>
<span class="theme-version">Copyright &copy; 2014 - Lenciel Li</span>
  <section class="contruction-wrap">
    <div class="contruction"></div>
  </section>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'lencielgithub';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>










</body>
</html>
